{"version":3,"sources":["io/reconnecting-websocket.js","utils/game-state.js","reducers/index.js","utils/url.js","components/blank-state.jsx","theme/index.js","components/loading-indicator.jsx","components/grid.jsx","components/board.jsx","io/websocket.js","utils/inline-svg.js","utils/engine-client.js","components/avatar.jsx","components/scoreboard.jsx","components/mediaControls.jsx","components/logo.jsx","components/game.jsx","actions/index.js","containers/app.jsx","index.js"],"names":["__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","define","undefined","window","ReconnectingWebSocket","prototype","onopen","event","onclose","onconnecting","onmessage","onerror","debugAll","CONNECTING","WebSocket","OPEN","CLOSING","CLOSED","url","protocols","options","settings","debug","automaticOpen","reconnectInterval","maxReconnectInterval","reconnectDecay","timeoutInterval","maxReconnectAttempts","binaryType","key","this","reconnectAttempts","readyState","protocol","ws","self","forcedClose","timedOut","eventTarget","document","createElement","generateEvent","s","args","evt","createEvent","initCustomEvent","addEventListener","bind","removeEventListener","dispatchEvent","open","reconnectAttempt","console","localWs","timeout","setTimeout","close","clearTimeout","e","isReconnect","code","reason","wasClean","Math","pow","data","send","refresh","apply","exports","module","DEFAULT_HEAD_DIRECTION","TYPE_HEAD","TYPE_TAIL","TYPE_BODY","formatFrame","frame","Turn","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Snakes","Symbol","iterator","next","done","snake","value","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Body","part","X","Y","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Food","food","cleanFrame","positions","snakes","formatSnakes","turn","map","formatPosition","gameOver","isLastFrameOfGame","sanitizeFrame","sanitizedFrame","cloneDeep","i","headSvg","tailSvg","_id","formatSnake","renderedParts","filter","_","shouldRenderPart","body","partIndex","type","length","getType","_formatPosition","x","y","direction","getDirection","headDirection","prevPart","max","formatDirection","isOverlapped","formatSnakePart","color","Color","ID","name","Name","effectiveSpace","health","Health","latency","Latency","isDead","Death","death","formatDeath","head","HeadType","toLowerCase","tail","TailType","HeadSvg","TailSvg","cause","Cause","tailIndex","currPart","nextPart","pos","a","b","oneLeft","windowPostMessage","parent","postMessage","error","parseArg","parts","split","decodeURIComponent","makeQueryString","query","sep","result","concat","httpToWsProtocol","mappings","http","https","from","to","substr","Error","join","_len","arguments","Array","_key","reduce","current","cleanA","replace","cleanB","joinPair","BlankState","react_default","location","origin","React","Component","colors","breakpoints","themes","LoadingIndicatorWrapper","styled","display","alignItems","justifyContent","height","width","LoadingIndicator","className","style","HIGHLIGHT_DIM","DEAD_OPACITY","CELL_SIZE","CELL_SPACING","FOOD_SIZE","toFixed","END_OVERLAP","DIRECTIONS_CW","toGridSpace","slot","getPartWidth","extraWidth","getPartHeight","extraHeight","getPartXOffset","xBias","getPartYOffset","yBias","getCornerPartXOffset","getCornerPartYOffset","getHeadFillerXOffset","getHeadFillerYOffset","getFillerWidth","getFillerHeight","getOpacity","highlightedSnake","range","size","push","checkIfCornerPart","d1","d2","behind","abs","indexOf","Grid","snakeIndex","isOverlappedByTail","renderHeadPart","renderTailPart","renderCornerPart","renderMiddlePart","getHeadXOffset","getHeadYOffset","box","viewBox","baseVal","transform","halfX","halfY","getHeadTransform","viewBoxStr","fill","shapeRendering","dangerouslySetInnerHTML","__html","innerHTML","Object","assign","opacity","cornerType","determineCornerType","d","getTailXOffset","getTailYOffset","getTailTransform","_this","unsortedSnakes","props","sortedSnakes","sort","aOrder","bOrder","viewBoxWidth","columns","viewBoxHeight","rows","maxWidth","maxHeight","row","col","theme","toConsumableArray","reverse","renderPart","f","foodIndex","cx","cy","r","renderGrid","Board","grid","streamAll","receive","turns","Promise","resolve","reject","ReconnectingWebsocket","obj","JSON","parse","loaded","getSvg","path","requireSvg","fetchSvg","_callee","response","svgText","svg","regenerator_default","wrap","_context","prev","fetch","sent","text","makeDom","abrupt","stop","wrapper","trim","firstChild","DEFAULT_SNAKE_HEAD","DEFAULT_SNAKE_TAIL","fetchResult","json","delay","millis","getAllSvgs","all","unique","Set","assignHeadAndTailUrls","getSnakeHeadSvgUrl","getSnakeTailSvgUrl","setHeadAndTailSvgs","_callee2","_context2","paths","t0","finish","isIllegalSvgPath","nameOrPath","svgUrlFromName","base","relative","prepareFrame","_callee3","_context3","fetchGameInfo","baseUrl","gameId","get","streamAllFrames","_x5","_x6","_x7","_streamAllFrames","_callee5","receiveFrame","game","chain","onFrame","wsUrl","_context5","then","asyncToGenerator","mark","_callee4","_context4","getFrameByTurn","frames","AvatarWrapper","_templateObject","NameWrapper","paddingBottom","flexDirection","_ref","textShadow","_ref2","fontSize","marginLeft","paddingTop","Length","_ref3","HealthBarWrapper","background","borderRadius","HealthBar","_ref4","backgroundColor","CauseOfDeath","_ref5","padding","lineHeight","Avatar","getReadableCauseOfDeath","Wrapper","scoreboard_templateObject","hide","_templateObject2","highlighted","Scoreboard","state","toggleHighlight","getSnakeToHighlight","highlightSnake","setState","_this2","aliveSnakes","aLower","bLower","deadSnakes","orderSnakes","scoreboard_AvatarWrapper","onClick","avatar","MediaControlsWrapper","mediaControls_templateObject","TurnCount","marginBottom","KeyboardShortcutsWrapper","position","ShortcutsPaneTrigger","mediaControls_templateObject2","ShortcutsPane","_templateObject3","ButtonWrapper","Button","_templateObject4","MediaControls","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","paneHidden","handleParentKeyboardEvent","handleKeyEvent","keyboardCodeMap","toggleTheme","handleReload","reloadGame","handlePlayPause","toggleGamePause","handleBackward","stepBackwardFrame","handleForward","stepForwardFrame","handleShortcutPaneShowToggle","KeyR","ArrowLeft","ArrowRight","Space","renderControls","_this$props","currentFrame","hideControls","paused","disabled","react_keyboard_event_handler_default","handleKeys","values","onKeyEvent","SVGWrapper","logo_templateObject","StyledLogo","xmlns","logo_templateObject2","q","PageWrapper","game_templateObject","GameBoardWrapper","BoardTitle","paddingLeft","fontFamily","textAlign","letterSpacing","HeaderWrapper","game_templateObject2","LogoWrapper","game_templateObject3","game_templateObject4","TurnCountValue","_templateObject5","BoardWrapper","_templateObject6","hideScoreboard","ScoreboardWrapper","_templateObject7","_ref6","Game","boardTheme","engine","hideLogo","title","setGameOptions","fetchFrames","invalidArgs","blank_state","renderGame","loading_indicator","board","mediaControls","hideMediaControls","logo","game_TurnCount","scoreboard","setTheme","setCurrentFrame","playFromFrame","dispatch","getState","frameRate","frameIndex","slicedFrames","ceiledFps","delayMillis","_frame3","lastFrame","gameOptions","slice","ceil","_x3","_x4","search","arg","connect","_getState$gameOptions","autoplay","engineUrl","_frame2","_x","_x2","_getState3","themeToSet","_x9","_x10","_getState","_getState2","_x8","_callee6","_getState4","nextFrame","stepToFrame","_context6","_x11","_x12","_ref7","_callee7","_getState5","prevFrame","_context7","_x13","_x14","snakeId","initialState","middleware","applyMiddleware","thunkMiddleware","store","createStore","action","objectSpread","parseInt","Height","Width","id","find","render","es","app","getElementById"],"mappings":"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","file":"static/js/main.972aa7c2.chunk.js","sourcesContent":["/* eslint-disable */\n\n// MIT License:\n//\n// Copyright (c) 2010-2012, Joe Walnes\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * This behaves like a WebSocket in every way, except if it fails to connect,\n * or it gets disconnected, it will repeatedly poll until it successfully connects\n * again.\n *\n * It is API compatible, so when you have:\n *   ws = new WebSocket('ws://....');\n * you can replace with:\n *   ws = new ReconnectingWebSocket('ws://....');\n *\n * The event stream will typically look like:\n *  onconnecting\n *  onopen\n *  onmessage\n *  onmessage\n *  onclose // lost connection\n *  onconnecting\n *  onopen  // sometime later...\n *  onmessage\n *  onmessage\n *  etc...\n *\n * It is API compatible with the standard WebSocket API, apart from the following members:\n *\n * - `bufferedAmount`\n * - `extensions`\n * - `binaryType`\n *\n * Latest version: https://github.com/joewalnes/reconnecting-websocket/\n * - Joe Walnes\n *\n * Syntax\n * ======\n * var socket = new ReconnectingWebSocket(url, protocols, options);\n *\n * Parameters\n * ==========\n * url - The url you are connecting to.\n * protocols - Optional string or array of protocols.\n * options - See below\n *\n * Options\n * =======\n * Options can either be passed upon instantiation or set after instantiation:\n *\n * var socket = new ReconnectingWebSocket(url, null, { debug: true, reconnectInterval: 4000 });\n *\n * or\n *\n * var socket = new ReconnectingWebSocket(url);\n * socket.debug = true;\n * socket.reconnectInterval = 4000;\n *\n * debug\n * - Whether this instance should log debug messages. Accepts true or false. Default: false.\n *\n * automaticOpen\n * - Whether or not the websocket should attempt to connect immediately upon instantiation. The socket can be manually opened or closed at any time using ws.open() and ws.close().\n *\n * reconnectInterval\n * - The number of milliseconds to delay before attempting to reconnect. Accepts integer. Default: 1000.\n *\n * maxReconnectInterval\n * - The maximum number of milliseconds to delay a reconnection attempt. Accepts integer. Default: 30000.\n *\n * reconnectDecay\n * - The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. Accepts integer or float. Default: 1.5.\n *\n * timeoutInterval\n * - The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. Accepts integer. Default: 2000.\n *\n */\n(function(global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    global.ReconnectingWebSocket = factory();\n  }\n})(this, function() {\n  if (!(\"WebSocket\" in window)) {\n    return;\n  }\n\n  function ReconnectingWebSocket(url, protocols, options) {\n    // Default settings\n    var settings = {\n      /** Whether this instance should log debug messages. */\n      debug: false,\n\n      /** Whether or not the websocket should attempt to connect immediately upon instantiation. */\n      automaticOpen: true,\n\n      /** The number of milliseconds to delay before attempting to reconnect. */\n      reconnectInterval: 1000,\n      /** The maximum number of milliseconds to delay a reconnection attempt. */\n      maxReconnectInterval: 30000,\n      /** The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. */\n      reconnectDecay: 1.5,\n\n      /** The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. */\n      timeoutInterval: 2000,\n\n      /** The maximum number of reconnection attempts to make. Unlimited if null. */\n      maxReconnectAttempts: null,\n\n      /** The binary type, possible values 'blob' or 'arraybuffer', default 'blob'. */\n      binaryType: \"blob\"\n    };\n    if (!options) {\n      options = {};\n    }\n\n    // Overwrite and define settings with options if they exist.\n    for (var key in settings) {\n      if (typeof options[key] !== \"undefined\") {\n        this[key] = options[key];\n      } else {\n        this[key] = settings[key];\n      }\n    }\n\n    // These should be treated as read-only properties\n\n    /** The URL as resolved by the constructor. This is always an absolute URL. Read only. */\n    this.url = url;\n\n    /** The number of attempted reconnects since starting, or the last successful connection. Read only. */\n    this.reconnectAttempts = 0;\n\n    /**\n     * The current state of the connection.\n     * Can be one of: WebSocket.CONNECTING, WebSocket.OPEN, WebSocket.CLOSING, WebSocket.CLOSED\n     * Read only.\n     */\n    this.readyState = WebSocket.CONNECTING;\n\n    /**\n     * A string indicating the name of the sub-protocol the server selected; this will be one of\n     * the strings specified in the protocols parameter when creating the WebSocket object.\n     * Read only.\n     */\n    this.protocol = null;\n\n    // Private state variables\n\n    var self = this;\n    var ws;\n    var forcedClose = false;\n    var timedOut = false;\n    var eventTarget = document.createElement(\"div\");\n\n    // Wire up \"on*\" properties as event handlers\n\n    eventTarget.addEventListener(\"open\", function(event) {\n      self.onopen(event);\n    });\n    eventTarget.addEventListener(\"close\", function(event) {\n      self.onclose(event);\n    });\n    eventTarget.addEventListener(\"connecting\", function(event) {\n      self.onconnecting(event);\n    });\n    eventTarget.addEventListener(\"message\", function(event) {\n      self.onmessage(event);\n    });\n    eventTarget.addEventListener(\"error\", function(event) {\n      self.onerror(event);\n    });\n\n    // Expose the API required by EventTarget\n\n    this.addEventListener = eventTarget.addEventListener.bind(eventTarget);\n    this.removeEventListener = eventTarget.removeEventListener.bind(\n      eventTarget\n    );\n    this.dispatchEvent = eventTarget.dispatchEvent.bind(eventTarget);\n\n    /**\n     * This function generates an event that is compatible with standard\n     * compliant browsers and IE9 - IE11\n     *\n     * This will prevent the error:\n     * Object doesn't support this action\n     *\n     * http://stackoverflow.com/questions/19345392/why-arent-my-parameters-getting-passed-through-to-a-dispatched-event/19345563#19345563\n     * @param s String The name that the event should use\n     * @param args Object an optional object that the event will use\n     */\n    function generateEvent(s, args) {\n      var evt = document.createEvent(\"CustomEvent\");\n      evt.initCustomEvent(s, false, false, args);\n      return evt;\n    }\n\n    this.open = function(reconnectAttempt) {\n      ws = new WebSocket(self.url, protocols || []);\n      ws.binaryType = this.binaryType;\n\n      if (reconnectAttempt) {\n        if (\n          this.maxReconnectAttempts &&\n          this.reconnectAttempts > this.maxReconnectAttempts\n        ) {\n          return;\n        }\n      } else {\n        eventTarget.dispatchEvent(generateEvent(\"connecting\"));\n        this.reconnectAttempts = 0;\n      }\n\n      if (self.debug || ReconnectingWebSocket.debugAll) {\n        console.debug(\"ReconnectingWebSocket\", \"attempt-connect\", self.url);\n      }\n\n      var localWs = ws;\n      var timeout = setTimeout(function() {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\n            \"ReconnectingWebSocket\",\n            \"connection-timeout\",\n            self.url\n          );\n        }\n        timedOut = true;\n        localWs.close();\n        timedOut = false;\n      }, self.timeoutInterval);\n\n      ws.onopen = function(event) {\n        clearTimeout(timeout);\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"onopen\", self.url);\n        }\n        self.protocol = ws.protocol;\n        self.readyState = WebSocket.OPEN;\n        self.reconnectAttempts = 0;\n        var e = generateEvent(\"open\");\n        e.isReconnect = reconnectAttempt;\n        reconnectAttempt = false;\n        eventTarget.dispatchEvent(e);\n      };\n\n      ws.onclose = function(event) {\n        clearTimeout(timeout);\n        ws = null;\n        if (forcedClose) {\n          self.readyState = WebSocket.CLOSED;\n          eventTarget.dispatchEvent(generateEvent(\"close\"));\n        } else {\n          self.readyState = WebSocket.CONNECTING;\n          var e = generateEvent(\"connecting\");\n          e.code = event.code;\n          e.reason = event.reason;\n          e.wasClean = event.wasClean;\n          eventTarget.dispatchEvent(e);\n          if (!reconnectAttempt && !timedOut) {\n            if (self.debug || ReconnectingWebSocket.debugAll) {\n              console.debug(\"ReconnectingWebSocket\", \"onclose\", self.url);\n            }\n            eventTarget.dispatchEvent(generateEvent(\"close\"));\n          }\n\n          var timeout =\n            self.reconnectInterval *\n            Math.pow(self.reconnectDecay, self.reconnectAttempts);\n          setTimeout(\n            function() {\n              self.reconnectAttempts++;\n              self.open(true);\n            },\n            timeout > self.maxReconnectInterval\n              ? self.maxReconnectInterval\n              : timeout\n          );\n        }\n      };\n      ws.onmessage = function(event) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\n            \"ReconnectingWebSocket\",\n            \"onmessage\",\n            self.url,\n            event.data\n          );\n        }\n        var e = generateEvent(\"message\");\n        e.data = event.data;\n        eventTarget.dispatchEvent(e);\n      };\n      ws.onerror = function(event) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"onerror\", self.url, event);\n        }\n        eventTarget.dispatchEvent(generateEvent(\"error\"));\n      };\n    };\n\n    // Whether or not to create a websocket upon instantiation\n    if (this.automaticOpen == true) {\n      this.open(false);\n    }\n\n    /**\n     * Transmits data to the server over the WebSocket connection.\n     *\n     * @param data a text string, ArrayBuffer or Blob to send to the server.\n     */\n    this.send = function(data) {\n      if (ws) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"send\", self.url, data);\n        }\n        return ws.send(data);\n      } else {\n        throw \"INVALID_STATE_ERR : Pausing to reconnect websocket\";\n      }\n    };\n\n    /**\n     * Closes the WebSocket connection or connection attempt, if any.\n     * If the connection is already CLOSED, this method does nothing.\n     */\n    this.close = function(code, reason) {\n      // Default CLOSE_NORMAL code\n      if (typeof code == \"undefined\") {\n        code = 1000;\n      }\n      forcedClose = true;\n      if (ws) {\n        ws.close(code, reason);\n      }\n    };\n\n    /**\n     * Additional public API method to refresh the connection if still open (close, re-open).\n     * For example, if the app suspects bad data / missed heart beats, it can try to refresh.\n     */\n    this.refresh = function() {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }\n\n  /**\n   * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\n   * this indicates that the connection is ready to send and receive data.\n   */\n  ReconnectingWebSocket.prototype.onopen = function(event) {};\n  /** An event listener to be called when the WebSocket connection's readyState changes to CLOSED. */\n  ReconnectingWebSocket.prototype.onclose = function(event) {};\n  /** An event listener to be called when a connection begins being attempted. */\n  ReconnectingWebSocket.prototype.onconnecting = function(event) {};\n  /** An event listener to be called when a message is received from the server. */\n  ReconnectingWebSocket.prototype.onmessage = function(event) {};\n  /** An event listener to be called when an error occurs. */\n  ReconnectingWebSocket.prototype.onerror = function(event) {};\n\n  /**\n   * Whether all instances of ReconnectingWebSocket should log debug messages.\n   * Setting this to true is the equivalent of setting all instances of ReconnectingWebSocket.debug to true.\n   */\n  ReconnectingWebSocket.debugAll = false;\n\n  ReconnectingWebSocket.CONNECTING = WebSocket.CONNECTING;\n  ReconnectingWebSocket.OPEN = WebSocket.OPEN;\n  ReconnectingWebSocket.CLOSING = WebSocket.CLOSING;\n  ReconnectingWebSocket.CLOSED = WebSocket.CLOSED;\n\n  return ReconnectingWebSocket;\n});\n","import cloneDeep from \"lodash.clonedeep\";\n\nconst DEFAULT_HEAD_DIRECTION = \"up\";\n\nconst TYPE_HEAD = \"head\";\nconst TYPE_TAIL = \"tail\";\nconst TYPE_BODY = \"body\";\n\nexport function formatFrame(frame) {\n  cleanFrame(frame);\n  const snakes = formatSnakes(frame.Snakes);\n  return {\n    turn: frame.Turn,\n    snakes: snakes,\n    food: formatPositions(frame.Food),\n    gameOver: isLastFrameOfGame(frame)\n  };\n}\n\nexport function sanitizeFrame(frame) {\n  // Copy without reference\n  const sanitizedFrame = cloneDeep(frame);\n\n  // nullify some fields\n  for (const i in sanitizedFrame.snakes) {\n    const snake = sanitizedFrame.snakes[i];\n    snake.headSvg = null;\n    snake.tailSvg = null;\n    snake._id = null;\n  }\n\n  return sanitizedFrame;\n}\n\nfunction formatSnakes(snakes) {\n  return snakes.map(formatSnake);\n}\n\nfunction formatSnake(snake) {\n  var renderedParts = snake.Body.filter((_, i) => shouldRenderPart(snake, i));\n  return {\n    body: snake.Body.map((_, i) => formatSnakePart(snake, i)),\n    color: snake.Color,\n    _id: snake.ID,\n    name: snake.Name,\n    effectiveSpace: renderedParts.length,\n    health: snake.Health,\n    latency: snake.Latency,\n    isDead: !!snake.Death,\n    death: formatDeath(snake.Death),\n    head: snake.HeadType && snake.HeadType.toLowerCase(),\n    tail: snake.TailType && snake.TailType.toLowerCase(),\n    headSvg: snake.HeadSvg,\n    tailSvg: snake.TailSvg\n  };\n}\n\nfunction formatDeath(death) {\n  if (!death) {\n    return;\n  }\n\n  return {\n    cause: death.Cause,\n    turn: death.Turn || 0\n  };\n}\n\nfunction headDirection(snake) {\n  return snake.Body.length > 1\n    ? getDirection(snake.Body[1], snake.Body[0])\n    : DEFAULT_HEAD_DIRECTION;\n}\n\nfunction shouldRenderPart(snake, partIndex) {\n  const headIndex = 0;\n  const tailIndex = snake.Body.length - 1;\n  const head = snake.Body[headIndex];\n  const tail = snake.Body[tailIndex];\n  const currPart = snake.Body[partIndex];\n\n  // always render head\n  if (partIndex === headIndex) {\n    return true;\n  }\n\n  // render tail if not covered by head\n  if (partIndex === tailIndex) {\n    return !(head.X === currPart.X && head.Y === currPart.Y);\n  }\n\n  // render middle part if it's in a different position than\n  // the next piece closer to head, and not in same spot as tail\n  const nextPart = snake.Body[partIndex - 1];\n  return (\n    !(tail.X === currPart.X && tail.Y === currPart.Y) &&\n    !(head.X === currPart.X && head.Y === currPart.Y) &&\n    !(nextPart && nextPart.X === currPart.X && nextPart.Y === currPart.Y)\n  );\n}\n\nfunction formatSnakePart(snake, partIndex) {\n  const part = snake.Body[partIndex];\n  const type = getType(snake, partIndex);\n  const { x, y } = formatPosition(part);\n  const direction = formatDirection(type, snake, part, partIndex);\n  const isOverlapped = !shouldRenderPart(snake, partIndex) ? true : undefined;\n\n  return {\n    direction,\n    type,\n    isOverlapped,\n    x,\n    y\n  };\n}\n\nfunction formatPositions(positions) {\n  return positions.map(formatPosition);\n}\n\nfunction formatPosition(pos) {\n  return {\n    x: pos.X,\n    y: pos.Y\n  };\n}\n\nfunction formatDirection(type, snake, part, partIndex) {\n  let direction;\n  if (type === \"head\") {\n    direction = headDirection(snake);\n  } else {\n    // handle special case where parts overlap\n    var prevPart;\n    do {\n      prevPart = snake.Body[Math.max(partIndex - 1, 0)];\n      --partIndex;\n    } while (partIndex > 0 && prevPart.X === part.X && prevPart.Y === part.Y);\n\n    direction = getDirection(part, prevPart);\n  }\n\n  return direction;\n}\n\nfunction getDirection(a, b) {\n  if (a.X < b.X) {\n    return \"right\";\n  } else if (b.X < a.X) {\n    return \"left\";\n  } else if (a.Y < b.Y) {\n    return \"down\";\n  }\n  return \"up\";\n}\n\nfunction getType(snake, partIndex) {\n  if (partIndex === 0) {\n    return TYPE_HEAD;\n  }\n\n  if (partIndex === snake.Body.length - 1) {\n    return TYPE_TAIL;\n  }\n\n  return TYPE_BODY;\n}\n\n// This is a workaround for fields that are omitted when they have the default\n// value. ie: int fields that need to default to 0 rather than undefined.\nfunction cleanFrame(frame) {\n  frame.Turn = frame.Turn || 0;\n\n  for (const snake of frame.Snakes) {\n    for (const part of snake.Body) {\n      part.X = part.X || 0;\n      part.Y = part.Y || 0;\n    }\n  }\n\n  for (const food of frame.Food) {\n    food.X = food.X || 0;\n    food.Y = food.Y || 0;\n  }\n}\n\nfunction oneLeft(snakes) {\n  const alive = snakes.filter(s => !s.death);\n  return alive.length <= 1;\n}\n\nexport function isLastFrameOfGame(frame) {\n  const snakes = formatSnakes(frame.Snakes);\n\n  if (snakes.length === 0) {\n    return true;\n  }\n\n  if (snakes.length === 1) {\n    return !!snakes[0].death;\n  }\n\n  return oneLeft(snakes);\n}\n","import { formatFrame, sanitizeFrame } from \"../utils/game-state\";\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_THEME\":\n      return { ...state, theme: action.theme };\n    case \"SET_GAME_OPTIONS\":\n      action.gameOptions.autoplay =\n        action.gameOptions.autoplay && action.gameOptions.autoplay === \"true\";\n      action.gameOptions.turn = parseInt(action.gameOptions.turn) || 0;\n      return { ...state, gameOptions: action.gameOptions };\n    case \"PAUSE_GAME\":\n      return { ...state, paused: true };\n    case \"GAME_OVER\":\n      return { ...state, paused: true };\n    case \"RESUME_GAME\":\n      return { ...state, paused: false };\n    case \"SET_CURRENT_FRAME\":\n      windowPostMessage({\n        action: action.type,\n        frame: sanitizeFrame(action.frame)\n      });\n      return { ...state, currentFrame: action.frame };\n    case \"RECEIVE_FRAME\":\n      const frame = formatFrame(action.frame);\n      return {\n        ...state,\n        grid: {\n          height: action.game.Game.Height,\n          width: action.game.Game.Width\n        },\n        frames: [...state.frames, frame] // Be smart: this consumes A LOT of memory...\n      };\n    case \"REQUEST_FRAMES\":\n      return { ...state };\n    case \"FETCH_FRAMES\":\n      return { ...state };\n    case \"HIGHLIGHT_SNAKE\":\n      windowPostMessage({\n        action: action.type,\n        id: action.snakeId,\n        name: action.snakeId\n          ? state.currentFrame.snakes.find(s => s._id === action.snakeId).name\n          : null\n      });\n      return { ...state, highlightedSnake: action.snakeId };\n    default:\n      return { ...state };\n  }\n};\n\nfunction windowPostMessage(data) {\n  if (!window.parent) {\n    return;\n  }\n  try {\n    window.parent.postMessage(data, \"*\");\n  } catch (e) {\n    console.error(e);\n  }\n}\n","// Creates a dictionary of parameters based on the given query string. q should\n// look like \"?foo=bar&thing=blah\".\nexport function parseQueryString(q) {\n  if (!q || !q.length) {\n    return {};\n  }\n\n  // Array of key/value pairs\n  const args = q\n    .substr(1)\n    .split(\"&\")\n    .map(parseArg);\n\n  // Convert to object\n  return args.reduce((result, arg) => {\n    result[arg.key] = arg.value;\n    return result;\n  }, {});\n}\n\n// Converts \"asdf=qwer\" to { asdf: \"qwer\" } or \"asdf\" to { asdf: true }. The\n// latter example is to allow switch-like parameters like ?enableThing without\n// an equals sign.\nfunction parseArg(a) {\n  const parts = a.split(\"=\");\n  const key = parts[0];\n  const value = parts[1] === undefined ? true : decodeURIComponent(parts[1]);\n  return { key, value };\n}\n\n// Converts { a: \"aaa\", b: \"bbb\" } to \"?a=aaa&b=bbb\"\nexport function makeQueryString(query) {\n  if (!query) {\n    return \"\";\n  }\n\n  let sep = \"?\";\n  let result = \"\";\n\n  for (const key in query) {\n    const value = query[key];\n    result += `${sep}${key}=${value}`;\n    sep = \"&\";\n  }\n\n  return result;\n}\n\n// Converts http://foo to ws://foo or https://foo to wss://foo\nexport function httpToWsProtocol(url) {\n  const mappings = {\n    http: \"ws\",\n    https: \"wss\"\n  };\n\n  for (const from in mappings) {\n    const to = mappings[from];\n    if (url.substr(0, from.length + 1) === from + \":\") {\n      return to + url.substr(from.length);\n    }\n  }\n\n  throw new Error(\"Invalid URL: \" + url);\n}\n\n// Joins path components and makes sure there is exactly one '/' separating\n// them.\nexport function join(...parts) {\n  function joinPair(a, b) {\n    const cleanA = a.replace(/\\/+$/, \"\");\n    const cleanB = b.replace(/^\\/+/, \"\");\n\n    if (cleanA === \"\") {\n      return cleanB;\n    }\n\n    if (cleanB === \"\") {\n      return cleanA;\n    }\n\n    return `${cleanA}/${cleanB}`;\n  }\n\n  return parts.reduce((current, next) => joinPair(current, next), \"\");\n}\n","import React from \"react\";\n\nclass BlankState extends React.Component {\n  render() {\n    return (\n      <div>\n        To run a game you need to specify engine and game parameters in the URL.\n        For example:\n        <pre>\n          {window.location.origin}?engine=&lt;ENGINE_URL&gt;&amp;game=&lt;GAME_ID&gt;\n        </pre>\n      </div>\n    );\n  }\n}\n\nexport default BlankState;\n","export const colors = {\n  // Page\n  pageBackground: \"transparent\",\n\n  // Grid\n  gridDot: \"#6a208f\",\n  gridCellBackground: \"#f1f1f1\",\n  gridCellBackgroundDark: \"#D6D5EA\",\n  food: \"#ff5c75\",\n\n  // Scoreboard\n  healthBar: \"#0f0\",\n  healthBarBackground: \"#fefefe\",\n  healthBarOutline: \"#666\",\n  healthBarDeathBackground: \"#f1f1f1\",\n  healthBarDeathBackgroundDark: \"#59526b\",\n\n  // Misc\n  lightText: \"#efefef\",\n  darkText: \"#222\",\n\n  // Colour names (from theme)\n  blue: \"#007bff\",\n  indigo: \"#6610f2\",\n  purple: \"#6f42c1\",\n  pink: \"#e83e8c\",\n  red: \"#dc3545\",\n  orange: \"#fd7e14\",\n  yellow: \"#ffc107\",\n  green: \"#28a745\",\n  teal: \"#20c997\",\n  cyan: \"#17a2b8\",\n  white: \"#fff\",\n  gray: \"#6c757d\",\n  grayLight: \"#f1f1f1\",\n  grayDark: \"#343a40\",\n  primary: \"#007bff\",\n  secondary: \"#6c757d\",\n  success: \"#28a745\",\n  info: \"#17a2b8\",\n  warning: \"#ffc107\",\n  danger: \"#dc3545\",\n  light: \"#f8f9fa\",\n  dark: \"#343a40\"\n};\n\nexport const breakpoints = {\n  sm: \"576px\",\n  md: \"768px\",\n  lg: \"992px\",\n  xl: \"1200px\",\n  xxl: \"1650px\"\n};\n\nexport const themes = {\n  // Themes\n  dark: \"dark\",\n  light: \"light\"\n};\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport { colors } from \"../theme\";\n\nconst LoadingIndicatorWrapper = styled(\"div\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100%\",\n  width: \"100%\"\n});\n\nclass LoadingIndicator extends React.Component {\n  render() {\n    return (\n      <LoadingIndicatorWrapper>\n        <div\n          className=\"la-ball-grid-beat la-dark la-2x\"\n          style={{\n            color: colors.food\n          }}\n        >\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n        </div>\n      </LoadingIndicatorWrapper>\n    );\n  }\n}\n\nexport default LoadingIndicator;\n","import React from \"react\";\nimport { colors, themes } from \"../theme\";\n\nconst HIGHLIGHT_DIM = 0.15;\nconst DEAD_OPACITY = 0.1;\nconst OVERLAP_OPACITY = 0.3;\n\nconst CELL_SIZE = 20;\nconst CELL_SPACING = 4;\nconst FOOD_SIZE = (CELL_SIZE / 3.25).toFixed(2);\nconst END_OVERLAP = 0.1;\n\nconst DIRECTIONS_CW = [\"up\", \"right\", \"down\", \"left\"];\n\nfunction toGridSpace(slot) {\n  return (CELL_SIZE + CELL_SPACING) * slot + CELL_SPACING;\n}\n\nfunction getPartWidth(part) {\n  const extraWidth =\n    part.direction === \"left\" || part.direction === \"right\"\n      ? 2 * CELL_SPACING\n      : 0;\n  return CELL_SIZE + extraWidth;\n}\n\nfunction getPartHeight(part) {\n  const extraHeight =\n    part.direction === \"up\" || part.direction === \"down\" ? 2 * CELL_SPACING : 0;\n  return CELL_SIZE + extraHeight;\n}\n\nfunction getPartXOffset(part) {\n  const xBias = part.direction === \"left\" || part.direction === \"right\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.x) + xBias;\n}\n\nfunction getPartYOffset(part) {\n  const yBias = part.direction === \"up\" || part.direction === \"down\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.y) + yBias;\n}\n\nfunction getCornerPartXOffset(part, type) {\n  return toGridSpace(part.x) - CELL_SPACING;\n}\n\nfunction getCornerPartYOffset(part, type) {\n  return toGridSpace(part.y) - CELL_SPACING;\n}\n\nfunction getTailXOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x) - END_OVERLAP;\n    case \"right\":\n      return toGridSpace(part.x) + END_OVERLAP;\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getTailYOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y) - END_OVERLAP;\n    case \"down\":\n      return toGridSpace(part.y) + END_OVERLAP;\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getHeadXOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x) + END_OVERLAP;\n    case \"right\":\n      return toGridSpace(part.x) - END_OVERLAP;\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getHeadYOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y) + END_OVERLAP;\n    case \"down\":\n      return toGridSpace(part.y) - END_OVERLAP;\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getHeadFillerXOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x + 1) - CELL_SPACING - END_OVERLAP;\n    case \"right\":\n      return toGridSpace(part.x) - CELL_SPACING - END_OVERLAP;\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getHeadFillerYOffset(part) {\n  // apply slight offset to avoid ugly white line in between parts (works most of the time)\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y + 1) - CELL_SPACING - END_OVERLAP;\n    case \"down\":\n      return toGridSpace(part.y) - CELL_SPACING - END_OVERLAP;\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getFillerWidth(part) {\n  return part.direction === \"left\" || part.direction === \"right\"\n    ? CELL_SPACING + 2 * END_OVERLAP\n    : CELL_SIZE;\n}\n\nfunction getFillerHeight(part) {\n  return part.direction === \"left\" || part.direction === \"right\"\n    ? CELL_SIZE\n    : CELL_SPACING + 2 * END_OVERLAP;\n}\n\nfunction getOpacity(snake, highlightedSnake) {\n  if (!snake.isDead) {\n    if (highlightedSnake) {\n      return snake._id === highlightedSnake ? 1 : HIGHLIGHT_DIM;\n    }\n  } else {\n    if (highlightedSnake) {\n      return snake._id === highlightedSnake ? 1 : 0;\n    }\n  }\n\n  return snake.isDead ? DEAD_OPACITY : 1;\n}\n\nfunction range(size) {\n  const result = [];\n  for (let i = 0; i < size; i++) {\n    result.push(i);\n  }\n  return result;\n}\n\nfunction sortAliveSnakesOnTop(snakes, highlightedSnake) {\n  return snakes.concat().sort((a, b) => {\n    let aOrder = a.isDead ? 0 : 1;\n    let bOrder = b.isDead ? 0 : 1;\n\n    // always put the highlighted snake up top\n    if (a._id === highlightedSnake) aOrder = 2;\n    if (b._id === highlightedSnake) bOrder = 2;\n\n    return aOrder - bOrder;\n  });\n}\n\nfunction getHeadTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"left\":\n      return `scale(-1,1) translate(-100, 0)`;\n    case \"up\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nfunction getTailTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"right\":\n      return `rotate(180 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"up\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nfunction areAdjacentDirections(d1, d2) {\n  // Check if the directions are adjacent in the circular directions array\n  // Otherwise they are the same or opposite directions\n  return (\n    Math.abs(DIRECTIONS_CW.indexOf(d1) - DIRECTIONS_CW.indexOf(d2)) % 2 === 1\n  );\n}\n\nfunction checkIfCornerPart(snake, partIndex) {\n  // If head or tail of the snake, then false\n  if (partIndex === 0 || partIndex === snake.body.length - 1) return false;\n\n  const behind = snake.body[partIndex + 1];\n  const current = snake.body[partIndex];\n\n  // Return false if the behind part has the same position as the current.\n  // Relevant for when the snake initially spawns.\n  if (behind.x === current.x && behind.y === current.y) return false;\n\n  // Check if the directions are adjacent in the circular directions array\n  // Otherwise they are the same or opposite directions and should be rendered with a straight part\n  return areAdjacentDirections(current.direction, behind.direction);\n}\n\nfunction determineCornerType(snake, partIndex) {\n  // If head or tail of the snake, then false\n  if (partIndex === 0 || partIndex === snake.body.length - 1) return false;\n\n  const behind = snake.body[partIndex + 1];\n  const current = snake.body[partIndex];\n\n  return `${current.direction} ${behind.direction}`;\n}\n\nfunction isOverlappedByTail(snake, part) {\n  const head = snake.body[snake.body.length - 1];\n  return part.isOverlapped && head.x === part.x && head.y === part.y;\n}\n\nclass Grid extends React.Component {\n  renderPart(snake, snakeIndex, part, partIndex) {\n    if (isOverlappedByTail(snake, part)) return;\n    switch (part.type) {\n      case \"head\":\n        return this.renderHeadPart(snake, snakeIndex, part);\n      case \"tail\":\n        return this.renderTailPart(snake, snakeIndex, part);\n      default:\n        if (checkIfCornerPart(snake, partIndex)) {\n          return this.renderCornerPart(snake, snakeIndex, part, partIndex);\n        } else {\n          return this.renderMiddlePart(snake, snakeIndex, part, partIndex);\n        }\n    }\n  }\n\n  renderHeadPart(snake, snakeIndex, part) {\n    const x = getHeadXOffset(part);\n    const y = getHeadYOffset(part);\n    const box = snake.headSvg.viewBox.baseVal;\n    const transform = getHeadTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    return (\n      <g key={\"part\" + snakeIndex + \",head\"}>\n        <svg\n          viewBox={viewBoxStr}\n          x={x}\n          y={y}\n          width={CELL_SIZE}\n          height={CELL_SIZE}\n          fill={snake.color}\n          shapeRendering=\"optimizeSpeed\"\n        >\n          <g\n            transform={transform}\n            dangerouslySetInnerHTML={{ __html: snake.headSvg.innerHTML }}\n          />\n        </svg>\n        {snake.effectiveSpace > 1 && (\n          // only add filler if the snake is effectively longer than one tile\n          <rect\n            x={getHeadFillerXOffset(part)}\n            y={getHeadFillerYOffset(part)}\n            width={getFillerWidth(part)}\n            height={getFillerHeight(part)}\n            fill={snake.color}\n            shapeRendering=\"optimizeSpeed\"\n          />\n        )}\n      </g>\n    );\n  }\n\n  renderMiddlePart(snake, snakeIndex, part, partIndex) {\n    return (\n      <rect\n        key={`part${snakeIndex},${part.x},${part.y}`}\n        x={getPartXOffset(part)}\n        y={getPartYOffset(part)}\n        width={getPartWidth(part)}\n        height={getPartHeight(part)}\n        fill={snake.color}\n        {...(part.isOverlapped ? { opacity: OVERLAP_OPACITY } : {})}\n        shapeRendering=\"optimizeSpeed\"\n      />\n    );\n  }\n\n  renderCornerPart(snake, snakeIndex, part, partIndex) {\n    let viewBox, transform;\n    let path = \"M0,20 h60 a60,60 0 0 1 60,60 v60 h-100 v-20 h-20 z\";\n\n    viewBox = \"0 0 140 140\";\n\n    const cornerType = determineCornerType(snake, partIndex);\n    switch (cornerType) {\n      case \"down left\":\n      case \"right up\":\n        transform = \"rotate(270, 70, 70)\";\n        break;\n      case \"left down\":\n      case \"up right\":\n        transform = \"rotate(90, 70, 70)\";\n        break;\n      case \"left up\":\n      case \"down right\":\n        break;\n      case \"right down\":\n      case \"up left\":\n        transform = \"rotate(180, 70, 70)\";\n        break;\n      default:\n        break;\n    }\n\n    return (\n      <svg\n        key={`part${snakeIndex},${part.x},${part.y}`}\n        x={getCornerPartXOffset(part, cornerType)}\n        y={getCornerPartYOffset(part, cornerType)}\n        width={CELL_SIZE + 2 * CELL_SPACING}\n        height={CELL_SIZE + 2 * CELL_SPACING}\n        fill={snake.color}\n        viewBox={viewBox}\n        {...(part.isOverlapped ? { opacity: OVERLAP_OPACITY } : {})}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <path d={path} transform={transform} />\n      </svg>\n    );\n  }\n\n  renderTailPart(snake, snakeIndex, part) {\n    const x = getTailXOffset(part);\n    const y = getTailYOffset(part);\n    const box = snake.tailSvg.viewBox.baseVal;\n    const transform = getTailTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    return (\n      <svg\n        key={\"part\" + snakeIndex + \",tail\"}\n        viewBox={viewBoxStr}\n        x={x}\n        y={y}\n        width={CELL_SIZE}\n        height={CELL_SIZE}\n        fill={snake.color}\n        {...(part.isOverlapped ? { opacity: OVERLAP_OPACITY } : {})}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <g\n          transform={transform}\n          dangerouslySetInnerHTML={{ __html: snake.tailSvg.innerHTML }}\n        />\n      </svg>\n    );\n  }\n\n  renderGrid() {\n    const unsortedSnakes = this.props.snakes || [];\n    const food = this.props.food || [];\n\n    // Make alive snakes render on top of dead snakes\n    const sortedSnakes = sortAliveSnakesOnTop(\n      unsortedSnakes,\n      this.props.highlightedSnake\n    );\n\n    const viewBoxWidth = toGridSpace(this.props.columns);\n    const viewBoxHeight = toGridSpace(this.props.rows);\n\n    return (\n      <svg\n        width={this.props.maxWidth}\n        height={this.props.maxHeight}\n        x={this.props.x}\n        y={this.props.y}\n        viewBox={`0 0 ${viewBoxWidth} ${viewBoxHeight}`}\n      >\n        {range(this.props.rows).map((_, row) =>\n          range(this.props.columns).map((_, col) => (\n            <rect\n              key={\"cell\" + row + \",\" + col}\n              x={toGridSpace(col)}\n              y={toGridSpace(row)}\n              width={CELL_SIZE}\n              height={CELL_SIZE}\n              fill={\n                this.props.theme === themes.dark\n                  ? colors.gridCellBackgroundDark\n                  : colors.gridCellBackground\n              }\n              shapeRendering=\"optimizeSpeed\"\n            />\n          ))\n        )}\n\n        {sortedSnakes.map((snake, snakeIndex) => {\n          return (\n            <g\n              key={`snake${snakeIndex}`}\n              opacity={getOpacity(snake, this.props.highlightedSnake)}\n            >\n              {[...snake.body]\n                .reverse()\n                .map((part, partIndex) =>\n                  this.renderPart(\n                    snake,\n                    snakeIndex,\n                    part,\n                    snake.body.length - partIndex - 1,\n                    this.props.highlightedSnake\n                  )\n                )}\n            </g>\n          );\n        })}\n\n        {food.map((f, foodIndex) => (\n          <circle\n            key={\"food\" + foodIndex}\n            cx={toGridSpace(f.x) + CELL_SIZE / 2}\n            cy={toGridSpace(f.y) + CELL_SIZE / 2}\n            r={FOOD_SIZE}\n            fill={colors.food}\n            shapeRendering=\"optimizeQuality\"\n          />\n        ))}\n      </svg>\n    );\n  }\n\n  render() {\n    if (this.props.snakes) {\n      return this.renderGrid();\n    } else {\n      return;\n    }\n  }\n}\n\nexport default Grid;\n","import React from \"react\";\nimport Grid from \"./grid\";\n\nconst BOARD_SIZE = 100;\n\nclass Board extends React.Component {\n  render() {\n    return (\n      <svg viewBox={`0 0 ${BOARD_SIZE} ${BOARD_SIZE}`}>\n        <Grid\n          snakes={this.props.snakes}\n          food={this.props.food}\n          columns={this.props.columns}\n          rows={this.props.rows}\n          highlightedSnake={this.props.highlightedSnake}\n          theme={this.props.theme}\n          maxWidth={BOARD_SIZE}\n          maxHeight={BOARD_SIZE}\n          x={0}\n          y={0}\n        />\n      </svg>\n    );\n  }\n}\n\nexport default Board;\n","import ReconnectingWebsocket from \"./reconnecting-websocket\";\n\n// Establishes websocket connection on given url and then calls receive for\n// every object sent from the server. Returns a promise that resolves when\n// receive returns true or when the server closes the connection.\nexport function streamAll(url, receive) {\n  const turns = {};\n  let done = false;\n\n  return new Promise((resolve, reject) => {\n    const ws = new ReconnectingWebsocket(url);\n    ws.addEventListener(\"message\", e => {\n      const obj = JSON.parse(e.data);\n      if (turns[obj.Turn]) {\n        return;\n      }\n      turns[obj.Turn] = true;\n\n      done = receive(obj);\n      if (done) {\n        ws.close();\n        resolve();\n      }\n    });\n\n    ws.addEventListener(\"onerror\", e => {\n      reject(e);\n    });\n\n    ws.addEventListener(\"onclose\", e => {\n      if (!done) {\n        done = true;\n        resolve();\n      }\n    });\n  });\n}\n","/**\n * This file contains helper functions for async loading svg files that\n * can be injected inline into an html <svg> element. This is better than\n * alternatives for the following reasons:\n *\n *    <use href=\"...\"> has a problem where the game could start before the\n *    svg has finished loading whereas this method gives a promise we can wait\n *    for.\n *\n *    <image src=\"...\"> has a problem where the fill color of the image cannot\n *    be overriden. Inline svg solves this problem and allows css styles to\n *    cascade into the svg content. <use> may also have this problem?\n *\n *    Directly embedding the svg xml into react components (or similar) would\n *    mostly solve everything except that it eliminates the possibility of\n *    pulling in svg data from external trusted sources.\n *\n * The main downside to this method is that the source of the svg must be\n * trusted or else you are vulnerable to xss attacks.\n */\n\nconst loaded = {};\n\nexport function loadSvgs(paths) {\n  return Promise.all(paths.map(requireSvg));\n}\n\nexport function getSvg(path) {\n  return loaded[path];\n}\n\nfunction requireSvg(path) {\n  if (path in loaded) {\n    return Promise.resolve(loaded[path]);\n  }\n\n  return fetchSvg(path);\n}\n\nasync function fetchSvg(path) {\n  const response = await fetch(path);\n  const svgText = await response.text();\n  const svg = makeDom(svgText);\n  loaded[path] = svg;\n  return svg;\n}\n\nfunction makeDom(svgText) {\n  const wrapper = document.createElement(\"div\");\n  wrapper.innerHTML = svgText.trim();\n  return wrapper.firstChild;\n}\n","import { streamAll } from \"../io/websocket\";\nimport { makeQueryString, httpToWsProtocol, join } from \"./url\";\nimport { loadSvgs, getSvg } from \"./inline-svg\";\nimport { isLastFrameOfGame } from \"./game-state\";\n\nconst DEFAULT_SNAKE_HEAD = \"regular\";\nconst DEFAULT_SNAKE_TAIL = \"regular\";\n\nasync function get(url, query) {\n  const fetchResult = await fetch(url + makeQueryString(query));\n  return fetchResult.json();\n}\n\nexport function delay(millis) {\n  return new Promise(resolve => setTimeout(resolve, millis));\n}\n\nexport function getReadableCauseOfDeath(cause) {\n  // Based on https://github.com/battlesnakeio/engine/blob/master/rules/death_cause.go\n\n  switch (cause) {\n    case \"snake-collision\":\n      return \"Collided with snake body\";\n    case \"snake-self-collision\":\n      return \"Collided with own body\";\n    case \"starvation\":\n      return \"Starvation\";\n    case \"head-collision\":\n      return \"Head on head collision\";\n    case \"wall-collision\":\n      return \"Collided with a wall\";\n    default:\n      return cause;\n  }\n}\n\n// Gets a list of all unique SVG paths required by the snakes.\nfunction getAllSvgs(snakes) {\n  const all = snakes.reduce((result, snake) => {\n    return result.concat([snake.HeadType, snake.TailType]);\n  }, []);\n  const unique = new Set(all);\n  return Array.from(unique);\n}\n\nfunction assignHeadAndTailUrls(snakes) {\n  for (const snake of snakes) {\n    // Assign default if missing\n    if (!snake.HeadType) {\n      snake.HeadType = DEFAULT_SNAKE_HEAD;\n    }\n    if (!snake.TailType) {\n      snake.TailType = DEFAULT_SNAKE_TAIL;\n    }\n\n    // Format as actual URL if it's just a name\n    snake.HeadType = getSnakeHeadSvgUrl(snake.HeadType);\n    snake.TailType = getSnakeTailSvgUrl(snake.TailType);\n  }\n}\n\nasync function setHeadAndTailSvgs(snakes) {\n  assignHeadAndTailUrls(snakes);\n  await loadSvgs(getAllSvgs(snakes));\n\n  for (const snake of snakes) {\n    snake.HeadSvg = getSvg(snake.HeadType);\n    snake.TailSvg = getSvg(snake.TailType);\n  }\n}\n\nfunction isIllegalSvgPath(nameOrPath) {\n  return nameOrPath.indexOf(\"/\") >= 0 || nameOrPath.indexOf(\".\") >= 0;\n}\n\nfunction svgUrlFromName(base, relative) {\n  return join(base, relative) + \".svg\";\n}\n\nfunction getSnakeHeadSvgUrl(path) {\n  const effectivePath = isIllegalSvgPath(path) ? DEFAULT_SNAKE_HEAD : path;\n  return svgUrlFromName(\"images/snake/head\", effectivePath);\n}\n\nfunction getSnakeTailSvgUrl(path) {\n  const effectivePath = isIllegalSvgPath(path) ? DEFAULT_SNAKE_TAIL : path;\n  return svgUrlFromName(\"images/snake/tail\", effectivePath);\n}\n\nasync function prepareFrame(frame) {\n  await setHeadAndTailSvgs(frame.Snakes);\n}\n\nexport function fetchGameInfo(baseUrl, gameId) {\n  const url = join(baseUrl, `games/${gameId}`);\n  return get(url);\n}\n\nexport async function streamAllFrames(baseUrl, gameId, receiveFrame) {\n  const game = await fetchGameInfo(baseUrl, gameId);\n\n  let chain = Promise.resolve();\n  function onFrame(frame) {\n    chain = chain.then(async () => {\n      await prepareFrame(frame);\n      return receiveFrame(game, frame);\n    });\n    return isLastFrameOfGame(frame);\n  }\n\n  const wsUrl = join(httpToWsProtocol(baseUrl), `socket/${gameId}`);\n  await streamAll(wsUrl, onFrame);\n  await chain;\n}\n\nexport function getFrameByTurn(frames, turn) {\n  return frames.filter(frame => frame.turn === turn)[0];\n}\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { breakpoints, colors, themes } from \"../theme\";\nimport { getReadableCauseOfDeath } from \"../utils/engine-client\";\n\nconst AvatarWrapper = styled(\"div\")`\n  margin-bottom: 0.5rem;\n  padding-bottom: 1rem;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n\n  @media (min-width: ${breakpoints.lg}) {\n    margin-bottom: 1rem;\n  }\n`;\n\nconst NameWrapper = styled(\"div\")({\n  paddingBottom: \"1rem\",\n  display: \"flex\",\n  flexDirection: \"row\"\n});\n\nconst Name = styled(\"span\")(({ theme }) => ({\n  display: \"block\",\n  textShadow: theme === themes.dark ? \"0 1px 2px rgba(0,0,0,0.90)\" : null\n}));\n\nconst Latency = styled(\"span\")(({ theme }) => ({\n  fontSize: \"1rem\",\n  marginLeft: \"auto\",\n  paddingTop: \"0.65rem\",\n  textShadow: theme === themes.dark ? \"0 1px 2px rgba(0,0,0,0.90)\" : null\n}));\n\nconst Length = styled(\"span\")(({ theme }) => ({\n  marginLeft: \"5px\",\n  textShadow: theme === themes.dark ? \"0 1px 2px rgba(0,0,0,0.90)\" : null\n}));\n\nconst HealthBarWrapper = styled(\"div\")({\n  width: \"100%\",\n  height: \"1.8rem\",\n  background: colors.healthBarBackground,\n  borderRadius: \"1.5rem\"\n});\n\nconst HealthBar = styled(\"div\")(({ color }) => ({\n  height: \"100%\",\n  backgroundColor: color,\n  borderRadius: \"inherit\"\n}));\n\nconst CauseOfDeath = styled(\"div\")(({ theme }) => ({\n  height: \"100%\",\n  padding: \".2rem .8rem\",\n  fontSize: \"1.5rem\",\n  lineHeight: \"1.3rem\",\n  backgroundColor:\n    theme === themes.dark\n      ? colors.healthBarDeathBackgroundDark\n      : colors.healthBarDeathBackground,\n  borderRadius: \"inherit\",\n  color: theme === themes.dark ? colors.lightText : colors.darkText\n}));\n\nclass Avatar extends React.Component {\n  render() {\n    return (\n      <AvatarWrapper>\n        <NameWrapper>\n          <Name>{this.props.snake.name}</Name>\n          <Latency>{this.props.snake.latency}</Latency>\n          <Length>{this.props.snake.body.length}</Length>\n        </NameWrapper>\n        <HealthBarWrapper>\n          {this.props.snake.death ? (\n            <CauseOfDeath theme={this.props.theme}>\n              {getReadableCauseOfDeath(this.props.snake.death.cause)}\n            </CauseOfDeath>\n          ) : (\n              <HealthBar\n                color={this.props.snake.color}\n                style={{\n                  width: `${this.props.snake.health}%`\n                }}\n              />\n            )}\n        </HealthBarWrapper>\n      </AvatarWrapper>\n    );\n  }\n}\n\nexport default Avatar;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport Avatar from \"./avatar\";\nimport { breakpoints, colors, themes } from \"../theme\";\n\nconst orderSnakes = snakes => {\n  // Sort by name\n  const aliveSnakes = snakes\n    .filter(s => !s.isDead)\n    .sort((a, b) => {\n      const aLower = a.name.toLowerCase();\n      const bLower = b.name.toLowerCase();\n      if (aLower < bLower) {\n        return -1;\n      }\n      if (aLower > bLower) {\n        return 1;\n      }\n      return 0;\n    });\n\n  // Sort by turn died, descending\n  const deadSnakes = snakes\n    .filter(s => s.isDead)\n    .sort((a, b) => a.death.turn - b.death.turn)\n    .reverse();\n\n  return aliveSnakes.concat(deadSnakes);\n};\n\nconst Wrapper = styled(\"div\")`\n  display: none;\n  padding-right: 2rem;\n  color: ${({ theme }) =>\n    theme === themes.dark ? colors.lightText : colors.darkText};\n  font-weight: 600;\n  font-size: 1.4rem;\n\n  @media (min-width: ${breakpoints.md}) {\n    display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n    font-size: 1.8rem;\n  }\n\n  @media (min-width: ${breakpoints.xxl}) {\n    font-size: 3.2rem;\n    letter-spacing: 0.1rem;\n  }\n`;\n\nconst AvatarWrapper = styled(\"div\")`\n  transition: background-color 0.2s, box-shadow 0.2s;\n  box-shadow: ${props =>\n    props.highlighted ? `0 0 0 1px ${colors.lightText}` : null};\n\n  &:hover {\n    background-color: ${props =>\n      props.theme === themes.dark ? colors.purple : colors.light};\n    cursor: pointer;\n  }\n`;\n\nclass Scoreboard extends React.Component {\n  state = {\n    highlightedSnake: null\n  };\n\n  toggleHighlight = snake => {\n    const getSnakeToHighlight = (state, snake) => {\n      return state.highlightedSnake !== snake._id ? snake._id : null;\n    };\n\n    this.props.highlightSnake(getSnakeToHighlight(this.state, snake));\n\n    this.setState(state => ({\n      highlightedSnake: getSnakeToHighlight(state, snake)\n    }));\n  };\n\n  render() {\n    const { highlightedSnake } = this.state;\n    return (\n      <Wrapper theme={this.props.theme}>\n        {this.props.snakes\n          ? orderSnakes(this.props.snakes).map((snake, i) => (\n              <AvatarWrapper\n                key={\"avatarwrapper\" + i}\n                onClick={() => this.toggleHighlight(snake)}\n                highlighted={highlightedSnake === snake._id}\n                theme={this.props.theme}\n              >\n                <Avatar\n                  snake={snake}\n                  key={\"avatar\" + i}\n                  theme={this.props.theme}\n                />\n              </AvatarWrapper>\n            ))\n          : undefined}\n      </Wrapper>\n    );\n  }\n}\n\nexport default Scoreboard;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\n\nimport { themes, breakpoints } from \"../theme\";\n\nconst MediaControlsWrapper = styled(\"div\")`\n  display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n  margin-top: 1rem;\n  width: 100%;\n`;\n\nconst TurnCount = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  color: theme === themes.dark ? \"#eee\" : \"#333\",\n  justifyContent: \"center\",\n  marginBottom: \"2rem\",\n  fontSize: \"1.4rem\"\n}));\n\nconst KeyboardShortcutsWrapper = styled(\"div\")({\n  position: \"relative\",\n  marginLeft: \"1rem\"\n});\n\nconst ShortcutsPaneTrigger = styled(\"div\")`\n  margin: 0;\n  padding: 1rem;\n  height: 3rem;\n  width: 3rem;\n  background: #dfdfdf;\n  border-radius: 50%;\n  line-height: 0.5;\n  text-align: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst ShortcutsPane = styled(\"div\")`\n  position: absolute;\n  bottom: 2.5rem;\n  right: 2.5rem;\n  width: 20rem;\n  padding: 1rem;\n  border: solid 1px #999;\n  background: #fff;\n\n  @media (min-width: ${breakpoints.md}) {\n    left: 2.5rem;\n    right: 0;\n  }\n\n  h4 {\n    margin-top: 0;\n    margin-bottom: 1rem;\n  }\n\n  ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nconst ButtonWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"center\",\n  width: \"100%\",\n  marginBottom: \"2rem\"\n});\n\nconst Button = styled(\"button\")`\n  display: inline-block;\n  min-width: 3rem;\n  text-align: center;\n  background: transparent;\n  color: ${({ theme }) => (theme === themes.dark ? \"#eee\" : \"#333\")};\n  font-size: 1.4rem;\n  border: none;\n  text-decoration: none;\n  text-align: center;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n`;\n\nclass MediaControls extends React.Component {\n  state = {\n    paneHidden: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.keyboardCodeMap = {\n      KeyR: \"r\",\n      ArrowLeft: \"left\",\n      ArrowRight: \"right\",\n      Space: \"space\"\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.handleParentKeyboardEvent);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.handleParentKeyboardEvent);\n  }\n\n  render() {\n    return this.renderControls();\n  }\n\n  handleParentKeyboardEvent = e => {\n    const { code } = e.data;\n    this.handleKeyEvent(this.keyboardCodeMap[code]);\n  };\n\n  toggleTheme = () => {\n    this.props.toggleTheme();\n  };\n\n  handleReload = () => {\n    this.props.reloadGame();\n  };\n\n  handlePlayPause = () => {\n    this.props.toggleGamePause();\n  };\n\n  handleBackward = () => {\n    this.props.stepBackwardFrame();\n  };\n\n  handleForward = () => {\n    this.props.stepForwardFrame();\n  };\n\n  handleShortcutPaneShowToggle = () => {\n    this.setState({\n      paneHidden: !this.state.paneHidden\n    });\n  };\n\n  handleKeyEvent = key => {\n    switch (key) {\n      case \"r\":\n        this.handleReload();\n        break;\n      case \"left\":\n        this.handleBackward();\n        break;\n      case \"right\":\n        this.handleForward();\n        break;\n      case \"space\":\n        this.handlePlayPause();\n        break;\n      default:\n        break;\n    }\n  };\n\n  renderControls() {\n    const { currentFrame, hideControls, paused, theme } = this.props;\n\n    return (\n      <MediaControlsWrapper hide={hideControls}>\n        <TurnCount theme={theme}>Turn: {currentFrame.turn}</TurnCount>\n        <ButtonWrapper>\n          <Button onClick={this.toggleTheme} theme={theme}>\n            Toggle Theme\n          </Button>\n          <Button\n            onClick={this.handleReload}\n            disabled={currentFrame.turn === 0 || !paused}\n            theme={theme}\n          >\n            Reload\n          </Button>\n          <Button onClick={this.handlePlayPause} theme={theme}>\n            {paused ? \"Play\" : \"Pause\"}\n          </Button>\n          <Button\n            onClick={this.handleBackward}\n            disabled={currentFrame.turn === 0 || !paused}\n            theme={theme}\n          >\n            Backward\n          </Button>\n          <Button onClick={this.handleForward} disabled={!paused} theme={theme}>\n            Forward\n          </Button>\n          <KeyboardEventHandler\n            handleKeys={Object.values(this.keyboardCodeMap)}\n            onKeyEvent={this.handleKeyEvent}\n          />\n          <KeyboardShortcutsWrapper>\n            <ShortcutsPaneTrigger onClick={this.handleShortcutPaneShowToggle}>\n              ?\n            </ShortcutsPaneTrigger>\n            {!this.state.paneHidden && (\n              <ShortcutsPane>\n                <h4>Keyboard shortcuts</h4>\n                <ul>\n                  <li>Reload = r</li>\n                  <li>Play/Pause = space</li>\n                  <li>Backward = left arrow</li>\n                  <li>Forward = right arrow</li>\n                </ul>\n              </ShortcutsPane>\n            )}\n          </KeyboardShortcutsWrapper>\n        </ButtonWrapper>\n      </MediaControlsWrapper>\n    );\n  }\n}\n\nexport default MediaControls;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport { colors, themes } from \"../theme\";\n\nconst SVGWrapper = styled(\"div\")`\n  height: 100%;\n  width: 100%;\n\n  > svg {\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    max-height: 100%;\n  }\n`;\n\nconst SVGLogo = props => {\n  return (\n    <SVGWrapper>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 503 184\" {...props}>\n        <path d=\"M305.5 102.7h-36.1v-71H253v71h-36.2v-71h-27L178.2.7h146.5l-.7 31h-18.5zm-33-3h30v-71H321l.6-25h-139l9.3 25h28v71h30v-71h22.6zm226 84.5l-133.3-72.5 34.2-34.8L365.9.3l134-.1V13l-22 15.5L502.5 50h-60.8L459 87.3 439.6 107zm-128.2-73.3l117 63.7-51.8-67.8 19.8-20.1-18.5-39.8h57.4l-21.3-18.7 24-16.8V3.2l-126.3.2L403 77.6zm87-87a7.3 7.3 0 1 1 7.3-7.2 7.3 7.3 0 0 1-7.3 7.2zm0-11.5a4.2 4.2 0 1 0 4.2 4.3 4.2 4.2 0 0 0-4.2-4.3z\" />\n        <path d=\"M134.8 104l-27.2-27.6 32-76.4h34.8l43 102.7h-39.3l-5.3-13.3h-32.5zm45.4-4.4h32.5L172.3 3.1h-30.7l-30.4 72.6 22.4 22.7 4.6-12H175zM167.9 66h-22.5l11.3-30zm-18-3h13.6l-6.8-18.2zm219.6 39.7h-42.3V30.3l.7-29.6h35.3V66h28l4.7 10.7zm-39.3-3h38l24-23.8-3-6.9h-29V3.8h-29.4l-.6 26.6z\" />\n        <path d=\"M3.9 184.2L62.8 107 43.4 87.3 60.7 50H0l24.7-21.5L2.4 13V.2l59.3.1h74.7L103 77l34.2 34.8-1.8 1zm43.2-97.5l19.7 20-51.6 68 117-63.7-32.8-33.3.4-1 32-73.3H5.5v8l24 16.9L8.2 46.9h57.5zm-2-62.8a7.3 7.3 0 1 1 7.2-7.3 7.3 7.3 0 0 1-7.3 7.3zm0-11.5a4.2 4.2 0 1 0 4.1 4.2 4.2 4.2 0 0 0-4.2-4.2zM210.7 118a.2.2 0 0 1-.2 0v-.1a.2.2 0 0 1 .2.2zm4.6-45.5a49.2 49.2 0 0 0 3.5 7.6l1.4 2.6-3.3-9.7a1.1 1.1 0 0 0-1.6-.6z\" />\n        <path d=\"M223.2 94.4a1 1 0 0 0-1.2-.3l-.4-.7c-2.9-3.3-5.7-6.8-8.8-10a1 1 0 0 0-.5.8l-.5 3a2 2 0 0 0 0 .3l-1.7 11a1.1 1.1 0 0 0 .6 1.1 5.5 5.5 0 0 1-.7 1.8l.3 5v3.4a1.2 1.2 0 0 0 0 .4v.5a.7.7 0 0 0-.1.1 1.2 1.2 0 0 0 0 .4c0 .1-.1 0 0 .1v.6c0 .2 0 0 0 0a2 2 0 0 1 0 .6v1.3s-.1 0 0 0a1 1 0 0 1 0 .2v.2a.4.4 0 0 0 0 .3s-.2.1 0 .2-.1 0 0 0l-.2 1.3v1.2h.1c.1 0 0 0 0 .2a.5.5 0 0 1 0 .2.5.5 0 0 1 .2.1v.3c0 .1 0 0 0 0h.4c.2 0 0 0 0 0h.1v1a30 30 0 0 1-1.4 7.2l-.5 1.1a148.2 148.2 0 0 0-6.2-17.1l-.4-2.2c.1-.2.3-.2.5-.2a2.7 2.7 0 0 1-.4-.9 3 3 0 0 1 0-.5 1 1 0 0 0-.1-.4 2.6 2.6 0 0 0-.4-.4v-.3a.2.2 0 0 1 .2 0c.2 0 .3-.1.3-.5a12.4 12.4 0 0 0-.9-2c-.6-4.5-1.2-9-1.6-13.5a1.1 1.1 0 0 0-1.2-1l-.2-.7a1.1 1.1 0 0 0-.4-.5l-.5.4a96 96 0 0 1-11.6 12.7l-2.1 3.4a1.2 1.2 0 0 0-.1.1 1.9 1.9 0 0 1 1.3 1.4 1.1 1.1 0 0 0 .6-.5l.6-.7q-1.1 6-2.4 11.8l-2 9a45.2 45.2 0 0 0-1.5 8.7.4.4 0 0 0 .4.4 391 391 0 0 1-1 4.7.9.9 0 0 0-.4 1 11 11 0 0 0 1.9 3.8l1.4 2.5 2.2 3.4a20.3 20.3 0 0 0 2.4 2.9 7.1 7.1 0 0 0 1 .8 65.3 65.3 0 0 1 3.2 6.1 1.1 1.1 0 0 0 2-.2l4.2-23.4.3.6a.9.9 0 0 1 1.5-.2v-1.4a.8.8 0 0 1 1.7 0v.7a.7.7 0 0 1 .6.4 35 35 0 0 0 3.4 5.2.8.8 0 0 1 1.3.2c.8 1.6 1.9 3 2.7 4.6a.8.8 0 0 1-.1 1 24 24 0 0 1 3.2 3l2.3 1.9a1.3 1.3 0 0 0 1.2.2c1 1.3 1.8 2.6 2.7 4a1.1 1.1 0 0 0 2-.6c.8-6.2 1.7-12.6 1.9-18.9a7.3 7.3 0 0 1 .8-1.3c0-1.3 0-2.8.2-4.5l.5-4.5 1.6-13.3c.5-3.4 1-6.9 1.3-10.4.2-3.1-1.6-5.2-3.5-7.7zM191.7 155l-.8-1.6a1 1 0 0 0 .2-.1 1.5 1.5 0 0 1 1-.4zm.5-2.5a.4.4 0 0 0-.2-.2c-.1 0-.1-.2 0-.4h.3l-.1.5zm4.9-59v-.8l.1-.6.4 1.5a1.2 1.2 0 0 0-.5 0zm1.4 6l-.3-1v-.3c0-.1 0 0 0 0a1 1 0 0 0 .3.6l.2 1zm5.7 19.8l-.9-4.3a403.2 403.2 0 0 1 1.5 4.5.6.6 0 0 0-.6-.2zm1.2 4.4v.8l-.5-2v-1a13.3 13.3 0 0 1 .8 1.7.5.5 0 0 0-.3.5zm1.2 4.4l-.2-.2a.7.7 0 0 0 .2-.3zm-.2-2.5a14 14 0 0 1 .2 1.6 11.9 11.9 0 0 1-.2-1.5zm.3 5l-.3-1.4a3.9 3.9 0 0 0 .5.2.5.5 0 0 0 .7-.4 12 12 0 0 0 0-1.6l.4 1.4a13.1 13.1 0 0 1-1.3 1.8zm4-16.5a6.3 6.3 0 0 0 0 1.3 3 3 0 0 0 0 .7v1.1c0 .2 0 0 0 0v.1a.1.1 0 0 1 0-.1 2.3 2.3 0 0 1 0-.8v-2.1s.1 0 0 0v-.8a.2.2 0 0 0 0-.2v-.4c0-.1.1 0 0-.1v-.1a2 2 0 0 0 0-.2V109.2l.1 1.8.2 3.3h-.3zm7.9 36.6v-1.5a1.4 1.4 0 0 0 .2-.2zm2.8-53.6a.7.7 0 0 0 0-.2V96.6a1.5 1.5 0 0 0 0-.2v-.1c0-.1-.1 0 0-.1v1zm2.8 7.4l-.7 5.4v-4.6a.4.4 0 0 0 0-.1 6.3 6.3 0 0 0 0-2.4 6 6 0 0 1 .4-1.7l-.5-1v-2l.7 1.2c.8 1.5.3 3.5.1 5.2zm166.2-37.2a1 1 0 0 0-1-.7 1 1 0 0 0-.7 1.9 4 4 0 0 1-.4.2 1.1 1.1 0 0 0-.7-.3h-.3a.6.6 0 0 0-.8-.5h-.2a.6.6 0 0 0-.5-.3c-3.3.4-6.4 1.9-9.4 3.2l-2 .8a.7.7 0 0 0-1-.4 8 8 0 0 0-1.1.7.6.6 0 0 0-.6-.1 175 175 0 0 0-14 6.2l-1.5.4-4.9 1.5a23.2 23.2 0 0 0-5 1.7.8.8 0 0 0 0 1.5 107.2 107.2 0 0 1-11 4.1 1 1 0 0 0 .5 1.9l-.6.5a6.8 6.8 0 0 0-1.5 2.5l.4 1a1 1 0 0 0 0 .3c-.3 8.4 0 17 .3 25.4l-.8.2a55.5 55.5 0 0 1-9.1 1.6 52.4 52.4 0 0 1-5.5.2 1.1 1.1 0 0 0-.7-.6l-.5-.2-3.6-2.7a36.7 36.7 0 0 1-3.5-4.5v-.2a11.1 11.1 0 0 1 1-1.2l.8-1.1a4 4 0 0 0 .7-1.3 28.7 28.7 0 0 1 2.6-3.3 130.6 130.6 0 0 0 9.5-11 27 27 0 0 0 2.2-3.2 11.6 11.6 0 0 1 .2-1.8c0-.5.2-1 .3-1.4a4.2 4.2 0 0 0-1-1.7 6 6 0 0 0-1.3-.8l-1.3-.7a4.1 4.1 0 0 1-1.3-1.2 2.7 2.7 0 0 1-1.9-.7c-.5-.4-1-.9-1.7-1.3a18.3 18.3 0 0 0-1.5 1.3 8.6 8.6 0 0 1-1.7 1.2c0 .4.2.6.4.6s.3.2.4.5l-.8-.1a1.5 1.5 0 0 0-1 .2 458 458 0 0 1-8.2 9.7 29 29 0 0 0-3.5 5l-1.5 2-1.7 2.3-1 1.2V103l.2-4.6-.2-7.6a11 11 0 0 0-1.2-5.2l.3-4a1 1 0 0 0-1.6-1 1.1 1.1 0 0 0-1.9-1l-1.9 2.6q-2.1 1.5-4 3.2c-3.4-.5-3.9 2.6-3.9 5.3a1 1 0 0 0 0 1.1v1.5l.1 4.1a6.5 6.5 0 0 1-.7 2.3 53.3 53.3 0 0 1 .2 7.6l-.2 4.7-2-2.2-12.6 4.8-1 .2a3.9 3.9 0 0 0-.8.4 2.7 2.7 0 0 0-.8 0 28.6 28.6 0 0 1-1.9-3.5l-1.7-4-1.1-2.8-1.3-2.8-1-3.2-.2-.3c-.3-3.5-2.5-6.3-4.3-9.3l-.5-1.1-1.3 1.6 1 1.8-1-.2v-.2a.8.8 0 0 0-.4-.6.8.8 0 0 0 0-.1l-1 1.6a2 2 0 0 1-2.7.7l-5.3-2.6a6 6 0 0 0-.9-.3l-5 11-.5.3a18.5 18.5 0 0 0-1 3l-.2.5-1.4 3a1.1 1.1 0 0 0 .3 1.4l-.1.6a27.3 27.3 0 0 1-1 2.7 2.3 2.3 0 0 0 0 .8 2.3 2.3 0 0 0 .3.6l-.7 3-.7 2.8-.3 1.6v.1c0 .1 0 0 0 0v.4c-.2 0 0 .1-.2.2s0 .1 0 .2a1.1 1.1 0 0 1 0 .3v.5c0 .1-.2.1 0 .1 0 .2 0 .4-.2.6v.4c0 .1 0 .1 0 0a2 2 0 0 1 0 .3V124.6c.1.1 0 0 0 0v.5c0 .1-.1 0 0 .1v.8a.6.6 0 0 1-.1.2l-.1.5v.1l-.4 1.6q-1 4.2-1.6 8.8l.2 1.4-.7.9 1 .7a.4.4 0 0 1 0 .2v.1c0 .1-.1 0 0 .1v.4s-.1 0 0 0v.2a.4.4 0 0 0 0 .2v.3a1.2 1.2 0 0 1 0 .1v.2c0 .3 0 .5-.2.6h.1v2.1c0 .1 0 0 0 0v.2c0 .2 0 0 0 0v.5c0 .1 0 0 0 0v1.5a13 13 0 0 0 0 2 .1.1 0 0 1 0 .2h-.1a2.6 2.6 0 0 1 0 .7V148.9h-.1a4.6 4.6 0 0 0 0-1 2 2 0 0 0 0-.5 2.1 2.1 0 0 1 0-.3v-.4a2 2 0 0 1 0-.5v-.7a.5.5 0 0 0 0-.1v-.1.9-.2h-.2v.3a2.9 2.9 0 0 0 0 .7 1.4 1.4 0 0 1 0 .3v2.4a.1.1 0 0 1 0 .2.3.3 0 0 0 0 .1v.1a.1.1 0 0 0 .1.1.2.2 0 0 1 0 .2.1.1 0 0 1 0 .1h.1a1.3 1.3 0 0 0 0 .5h-.9v-.4a.2.2 0 0 0 0-.1v-.1a1.5 1.5 0 0 1 0-.5v-.6.3l.1.2c.1 0 0-.2 0-.2v.4a2.9 2.9 0 0 0 .1.3v.1a.7.7 0 0 1 0 .3 1 1 0 0 1 0 .3v.1l.1-.1c.1-.1 0 0 0 0v-.2a.2.2 0 0 1 0 .2c.1 0 0 .2 0 .2a3.4 3.4 0 0 0 .2.8v.1a.7.7 0 0 1 0 .4h.2c-.1 0 0-.2 0-.2v-.1l.1.1c.1 0 0 0 0 .1a3.4 3.4 0 0 1 0-.5s.2 0 0 0 .1 0 0-.2v-.3a4.5 4.5 0 0 0 .9 1.9 2.9 2.9 0 0 0 3 1.1 51.1 51.1 0 0 0 5.8 5.3c.6.5 2 .3 1.9-.8-.7-5.6.5-11.1 1.5-16.6a50.6 50.6 0 0 0 .9-7.6l.1-2.7a25.8 25.8 0 0 0 2.3 4.6c.7.9 2.3.4 2-.8a.9.9 0 0 0 0-.2 84.8 84.8 0 0 1 8.5-3.5l2.3-.7 1 3 .2.4a1.7 1.7 0 0 1 1.5.5l.1.1a131.4 131.4 0 0 1 3.1 15 .5.5 0 0 0 .9.3c1.3-1.4 1.7-3.5 2.3-5.4l2.2-4.8a9.2 9.2 0 0 0 .6-.7 10.7 10.7 0 0 0 1.6-3l.3-.6.4-.5a.4.4 0 0 0-.1-.6 12.8 12.8 0 0 0 .2-1.3l.1-.4v-.3a19.2 19.2 0 0 0 .5-2.2 1.1 1.1 0 0 0-1.4-1.3l-.8-2.3a5.3 5.3 0 0 1-.5-1l-.3-1c1.1-.8 4.8-.5 5.6-1.5a73 73 0 0 1 6.8-3.5c.1 1.2.2 8.4.4 9.5a6.3 6.3 0 0 1-.5.4c-.2.1-.2.3 0 .7l.3.3.5.6v.2a2.7 2.7 0 0 1-.7.3 1.4 1.4 0 0 0 0 1 8.7 8.7 0 0 0 .6.8 4 4 0 0 1 .3.5l.1 1.1a2.4 2.4 0 0 1-.1.2l.1.1c.3 2.5.7 5 .8 7.5l-.2 1a1.2 1.2 0 0 0 .2.9 24 24 0 0 1-.2 3.4l-.6 1c-.7 1.2 1 2.5 1.8 1.5a1.1 1.1 0 0 0 .7-.6l1.2-2-.7 1.6c-.7 1.3 1.3 2.5 2 1.2l3.6-7.3a3.5 3.5 0 0 0 .5 0 8.8 8.8 0 0 0 2.9-4 49 49 0 0 0 1.5-5l.6-2 3-6a9.8 9.8 0 0 0 2.1 1.5 49.7 49.7 0 0 0 9.7 3 11.7 11.7 0 0 0 1.2.4 2.3 2.3 0 0 0 .6 0l2.3.5a.6.6 0 0 0 .2.2 19 19 0 0 0 3.9.5 20.3 20.3 0 0 0 4.5 0l1.8-.3c1.9 0 4-.3 5.3-.5l.2 3a1.4 1.4 0 0 0-.2.4 4.3 4.3 0 0 0 .8 4.4v.1l-.1 1.3c0 1.5-.3 4.3 1 5.4a1.6 1.6 0 0 0 .1.2c.2 1.3.5 2.8 2 2.9a13.6 13.6 0 0 0 3.4-.8l4.5-1.2 5.7-1.4a57.8 57.8 0 0 0 7.2-1.4c2-.5 4-1.3 5.8-2l7.2-1.9c1.3-.3 1-2.4-.3-2.3a24.2 24.2 0 0 0-4.5 1 20.3 20.3 0 0 0 4-1.7 8.8 8.8 0 0 0 1.6-1 23.4 23.4 0 0 1 .9-5.6l.9-3a2.5 2.5 0 0 0-.6-.8 1.5 1.5 0 0 1-1.3-.2 9.5 9.5 0 0 1-1-1l-1.3-1a3 3 0 0 0-1.3-.9 16.6 16.6 0 0 1-3.8 1.5 9 9 0 0 0-3.5 1.8 25.8 25.8 0 0 0-4.2.6l-3.2.8q-1.5.5-3.3.8a6.3 6.3 0 0 1-2.5-.4v-9.4a6.2 6.2 0 0 0 1.8 0 4.4 4.4 0 0 1 2.2.1 2.3 2.3 0 0 1 1.7-.5 2.8 2.8 0 0 0 1.4-.2l.6-.1a.6.6 0 0 0 .3 0h.6a9.4 9.4 0 0 0 3.4-.8l.3-.2c.4 0 .9-.2 1.3-.4l.2-.1a1.1 1.1 0 0 0 2 .2 1 1 0 0 0 1-1l-.1-2c0-.2.2-.3.3-.4l2.1-2.4a3.9 3.9 0 0 0-.1-1.8 6.8 6.8 0 0 0-.8-1.5 2.1 2.1 0 0 1-1.4-.2c0-1.1 0-2.2.2-3.4a1 1 0 0 0-.3-.8 1.2 1.2 0 0 0-1.9-.1v.3a1 1 0 0 0-.3 0 1.2 1.2 0 0 0-1.2-.4l-2.7.7-4.2.8a30.4 30.4 0 0 1-6.2.8c-.2-.3 1.3-6.5 1.2-7v-.3c3.2-1.4 6.3-3.2 9.4-4.7q6-2.7 12.1-5l9.3-3.4a.8.8 0 0 1 .4-1.1 58.1 58.1 0 0 1 6-2.1c.4-.2 1.2-.6 2-.8l.4-1.4a9.8 9.8 0 0 1-1.2.2 6.3 6.3 0 0 1-1.4.1 1.1 1.1 0 0 1-.8-1.8.8.8 0 0 0 .3.3 1.1 1.1 0 0 0 .4.1h.1c-.2 0 0 0 0 0a.8.8 0 0 0 .5 0h.1a1.7 1.7 0 0 0 .3-.1 1.4 1.4 0 0 0 .7-1.2 1 1 0 0 0-.8-1 1 1 0 0 0-1 .6 1 1 0 0 0-.6 1 9.4 9.4 0 0 1-1.5.3c-1.2 0-1.4-1.4-.6-2a11.6 11.6 0 0 1 2-1 1.2 1.2 0 0 1 0-1.4 11 11 0 0 1-1.4.3 1.4 1.4 0 0 1-1.4-.7h.1a3.3 3.3 0 0 0 1.5.1c1 .5 2.2-.7 2-1.8a2 2 0 0 0-1.6-1.3 3.4 3.4 0 0 0-.5 0 96 96 0 0 1 3.3-1.8.9.9 0 0 0 .5-.2l1.8-1 3.7-1.8.7-.4.6-1.5-4.8 1.9zm-150 89l-1.2-1.3a1 1 0 0 0 1-.8l.1-.5a.6.6 0 0 0 .2 0v2.5zm8.5-22.5l-.5-1 .7.1h1.2a13.8 13.8 0 0 0-1.4 1zm3.5-13.3l-4.4.9a5.3 5.3 0 0 1-.8.2 5 5 0 0 0-1 .2l.6-1.7.7-1.6a39.9 39.9 0 0 1 1.6-4.5 30.8 30.8 0 0 1 2.3-4.4l.2-.9a178 178 0 0 1 5 10.6 40.5 40.5 0 0 1-4.2 1.2zm10 10.3l.3-.1a7.8 7.8 0 0 1 .2 1.3zm4.8 18.1q-.9-5.4-2.1-10.7a36.1 36.1 0 0 1 1.4 4v1.8a.5.5 0 0 0 .7.5l.7 2.5a10.1 10.1 0 0 1-.7 2zm22.6-5.8a.8.8 0 0 0-.2-.1l.2-.8a.8.8 0 0 0 .3-.1l.1.3zm14.7-17.5a1 1 0 0 1 .4.3l.6.4a7 7 0 0 1-1-.7zm34.2 16.5a4.4 4.4 0 0 1-.7-2l.6.6a6.2 6.2 0 0 1 .1 1.2zm13.7 1.9a27.8 27.8 0 0 0 3.2-.7c1.6-.4 3-.8 4.2-1.3a2.7 2.7 0 0 1 1 .1l-9.5 2.5c.3-.3.7-.5 1-.6zm6.7-64.2l-.9.2-.4.2v-.1l1.6-.5zm18-4.8a.1.1 0 0 0-.1 0l-.4.1s0 .1 0 0h-.2a.7.7 0 0 0-.1.2c0-.1-.2 0-.2 0h-.2a.7.7 0 0 0 .2-.2l.3-.1 1.4-.4zm6.1 1.7l.3-.1a.1.1 0 0 1 .1 0l-.2.2h-.1l-.2.1c-.2.1 0 0-.1 0h-.1zm1.6-6.2l-5 2.6-3.7 1.9a1 1 0 0 0 0-.7 84.8 84.8 0 0 0 10.2-4.8 1 1 0 0 0 .1.3l-1.5.7zM377.2 90zm1-.2z\" />\n        <path d=\"M184.5 76.6l-1 1.4a1 1 0 0 0-1.3-.5l-.4.2a1.1 1.1 0 0 0-.5-1 .8.8 0 0 0-.1-1 .8.8 0 0 0-.4-1 1.6 1.6 0 0 0-1-.3.8.8 0 0 0-.3-.9l2-1.2a1 1 0 0 1 0-.4 3 3 0 0 1 1-1l-3.5 2.4a1.7 1.7 0 0 0-1 .1 1.1 1.1 0 0 0-.8 0 1 1 0 0 0-.7 1l-5 3-.2.1a2 2 0 0 0-.5 0 2 2 0 0 0-1.2 1l-3.3 2.2a26.6 26.6 0 0 0-4.4 3l-1.4.7 1-.8c3.4-2.5 7.1-5 10.3-7.7.6-.6-.2-1.6-1-1.2a94.6 94.6 0 0 0-11 7.4l-10.6 8c-7 5.2-14 10.6-20.4 16.4a1 1 0 0 0-.4.7 17.3 17.3 0 0 0-4.2 3.5v.1c.7 4.8 4.2 8.4 6.4 12.7a110.5 110.5 0 0 1 14.3 3q2.3.6 4.5 1.4a12.5 12.5 0 0 1 4.3 2c2 1.8 1.7 4.7 1 7.2a43.9 43.9 0 0 1-6 5.6l-7.5 3.7-6.4 3.5a2 2 0 0 1 0 .3l-3.5 1.4a68.3 68.3 0 0 0-7.7 3.1.8.8 0 0 0 .3 1.6.8.8 0 0 0 .8 1.1 36.4 36.4 0 0 0 6.5-2.7l.4-.2c-4.9 4.3-10.5 7.7-16 11.3-2.2 1.5-4.5 3-6.7 4.7a.8.8 0 0 1 .2.2 74.2 74.2 0 0 1 11.4-6.5c.9-.4 1.8.7 1 1.3-2 1.9-4.5 3.4-6.3 5.5l.7-.2h.3l.1-.2.4-.1a38.7 38.7 0 0 1 5-2.9 1.3 1.3 0 0 1 1.6.7 2.4 2.4 0 0 0 .2-.2.6.6 0 0 0 .2 0l1.5-.7-1.9 1a.8.8 0 0 1-.3 1l-.3.1a11.7 11.7 0 0 0 1.4-.7l.6-.3c.8-.6 1.6.6 1 1.2 2.7-1.5 5.4-2.9 8.2-4.2a.9.9 0 0 0 0 .6l-.5.3a.5.5 0 0 0 .3 1 62.6 62.6 0 0 0 6.3-2l4.4-2.6.6-.4a9 9 0 0 1 2.3.1.5.5 0 0 0 .7-.5 2.7 2.7 0 0 1 0-.6c-.2.4.4 1 .8.5a9.1 9.1 0 0 1 1.3-1.2 36.4 36.4 0 0 0 6.5-3.5 17.7 17.7 0 0 0 3.2-1.9l1.9-1.4a33.8 33.8 0 0 0 2.8-2l.9-.7a13.9 13.9 0 0 0 2.2-1.7 19 19 0 0 1 2-1.5.5.5 0 0 0 .3-.6l.8-1.4a25.9 25.9 0 0 0 2.8-6.7 21.4 21.4 0 0 0 .6-7.7 10.7 10.7 0 0 0-1.2-4l-1-2.1c-.7-1.1-1.2-2.4-2-3.3a23.8 23.8 0 0 0-5.3-5 33 33 0 0 0-6.7-3.3c-2.3-.9-5.4-1.2-7.3-2.6a1.1 1.1 0 0 1-.3-.4l13.8-9c5.6-3.7 11.5-7.3 17-11.4l3.7-2a2.7 2.7 0 0 0 0-.2 1.9 1.9 0 0 1-1.3-1.6 2 2 0 0 1-.7-1.3.8.8 0 0 0 .3-.1 6.8 6.8 0 0 0 1.4-3.6 1 1 0 0 0 1.5-.3l.1-.8a1 1 0 0 0-1-1l1-2a.9.9 0 0 0-1.6-1zm-36.8 47.9a1.2 1.2 0 0 0-.2.2l-2.8-.8 1.8.3 1.4.2zm-10.2 40.4l1.3-.7a63.7 63.7 0 0 1-1.3.7zm16.3-8.6l-.3.3-.6.2.1-.1zm7.7-27a4 4 0 0 1 .1 3 11.9 11.9 0 0 0-.1-3zm4.6 19.8l-1.3 1-.6.4.4-.5 1.5-1zM147.2 160l-1.1.6h-.3l1.4-.5zm2-15.1a3 3 0 0 1 .4-.2l.3-.2h.3a2.7 2.7 0 0 0 .4-.2h.2a.6.6 0 0 1 .2-.1l-.3.2h-.1c-.2.2-.5.2-.7.3a2.8 2.8 0 0 1-.4.2l-.5.2zm13.5-16.6l-.2.9a6.5 6.5 0 0 0-1.3-1.1zm-4.8-2a9.2 9.2 0 0 1 .7 1.4 9.2 9.2 0 0 0-1-1.1 1.7 1.7 0 0 0 .3-.4zm-.9 11.2l1-1.4-.8 1.2-.2.2zm-1.6-10a13 13 0 0 1 .4 1.4 6.6 6.6 0 0 0-1.5-1.4 8.6 8.6 0 0 0 1-.1zm-2.8-4.3a5 5 0 0 1 .5.4l-1.5-.6zm24-39a1.4 1.4 0 0 1-1.4-.8h.1a1.1 1.1 0 0 0 .3-.6.9.9 0 0 0 0-.3.7.7 0 0 0 .2-.2.9.9 0 0 0 0-1 1 1 0 0 0 .7-.3 1.1 1.1 0 0 0 .2-.4l.5-.2a2.3 2.3 0 0 0-.6 1 .7.7 0 0 0 .7.9 1 1 0 0 0 .1 1 1 1 0 0 0 1.2.2 1.4 1.4 0 0 0 .3-.1l.2-.1.3-.2a1 1 0 0 0 .5.5 18.8 18.8 0 0 1-3.2.5zm4.5-4a2.4 2.4 0 0 1-.1.3v.1a1.1 1.1 0 0 0 0 .2 1 1 0 0 0-.2-.4l.5-.4a.9.9 0 0 0-.2.2zm1.3-.5a1 1 0 0 0-.3.1 1 1 0 0 0-.5 0l1-.5zm4.8-6.8l-.1-.1a1 1 0 0 0-.8-.5 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .5.8v.1a1 1 0 1 0 1.4-1.3z\" />\n      </svg>\n    </SVGWrapper>\n  );\n};\n\nconst StyledLogo = styled(SVGLogo)`\n  > path {\n    fill: ${({ color, theme }) => {\n      return !color\n        ? theme === themes.dark\n          ? colors.white\n          : colors.purple\n        : color;\n    }};\n  }\n`;\n\nexport default StyledLogo;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\n\nimport BlankState from \"./blank-state\";\nimport LoadingIndicator from \"./loading-indicator\";\nimport Board from \"./board\";\nimport Scoreboard from \"./scoreboard\";\nimport MediaControls from \"./mediaControls\";\nimport Logo from \"./logo\";\nimport { breakpoints, colors, themes } from \"../theme\";\n\nconst PageWrapper = styled(\"div\")`\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background: ${({ theme }) =>\n    theme === themes.dark ? colors.purple : \"transparent\"};\n  background: ${({ theme }) =>\n    theme === themes.dark\n      ? `linear-gradient(30deg,hsl(280, 94%, 16%) 30%,hsl(269,99%,30%) 100%)`\n      : \"transparent\"};\n`;\n\nconst GameBoardWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  width: \"100%\",\n  height: \"100%\"\n});\n\nconst BoardTitle = styled(\"div\")(({ theme }) => ({\n  paddingLeft: \"2rem\",\n  paddingTop: \"1rem\",\n  fontSize: \"3.5rem\",\n  fontFamily: \"'Permanent Marker', cursive\",\n  textAlign: \"center\",\n  color: theme === themes.dark ? colors.lightText : colors.darkText,\n  letterSpacing: \".3rem\"\n}));\n\nconst HeaderWrapper = styled(\"div\")`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n  padding-right: 1rem;\n  text-align: center;\n\n  @media (min-width: ${breakpoints.xxl}) {\n    padding-top: 1rem;\n    padding-bottom: 2rem;\n  }\n`;\n\nconst LogoWrapper = styled(\"div\")`\n  width: 100%;\n  height: 5rem;\n\n  @media (min-width: ${breakpoints.lg}) {\n    height: 8rem;\n  }\n\n  @media (min-width: ${breakpoints.xxl}) {\n    height: 16rem;\n  }\n`;\n\nconst TurnCount = styled(\"div\")`\n  font-size: 1.8rem;\n  font-family: \"Permanent Marker\", cursive;\n  color: ${({ theme }) =>\n    theme === themes.dark ? colors.lightText : colors.darkText};\n\n  @media (min-width: ${breakpoints.xxl}) {\n    font-size: 3rem;\n  }\n`;\nconst TurnCountValue = styled(\"span\")`\n  display: inline-block;\n  width: 8rem;\n`;\n\nconst BoardWrapper = styled(\"div\")`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ${breakpoints.md}) {\n    width: ${({ hideScoreboard }) => (hideScoreboard ? \"100%\" : \"60vw\")};\n  }\n`;\n\nconst ScoreboardWrapper = styled(\"div\")`\n  display: none;\n  width: 40vw;\n  margin-left: 2rem;\n\n  @media (min-width: ${breakpoints.md}) {\n    display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n  }\n`;\n\nclass Game extends React.Component {\n  componentDidMount() {\n    const { options } = this.props;\n\n    if (options.boardTheme) {\n      this.props.toggleTheme(options.boardTheme);\n    }\n\n    if (options.game && options.engine) {\n      this.hideLogo = options.hideLogo === \"true\";\n      this.hideScoreboard = options.hideScoreboard === \"true\";\n      this.title = options.title && decodeURIComponent(options.title);\n      this.props.setGameOptions(options);\n      this.props.fetchFrames();\n    } else {\n      this.invalidArgs = true;\n    }\n  }\n\n  render() {\n    const { currentFrame } = this.props;\n\n    if (this.invalidArgs) {\n      return <BlankState />;\n    }\n\n    if (currentFrame) {\n      return this.renderGame();\n    }\n\n    return <LoadingIndicator />;\n  }\n\n  renderGame() {\n    const { currentFrame, options } = this.props;\n    return (\n      <PageWrapper theme={this.props.theme}>\n        <GameBoardWrapper>\n          <BoardWrapper hideScoreboard={this.hideScoreboard}>\n            <BoardTitle theme={this.props.theme}>{this.title}</BoardTitle>\n            <Board\n              snakes={currentFrame.snakes}\n              food={currentFrame.food}\n              columns={this.props.grid.width}\n              rows={this.props.grid.height}\n              highlightedSnake={this.props.highlightedSnake}\n              theme={this.props.theme}\n            />\n            <MediaControls\n              currentFrame={currentFrame}\n              hideControls={options.hideMediaControls === \"true\"}\n              toggleTheme={this.props.toggleTheme}\n              reloadGame={this.props.reloadGame}\n              toggleGamePause={this.props.toggleGamePause}\n              stepBackwardFrame={this.props.stepBackwardFrame}\n              stepForwardFrame={this.props.stepForwardFrame}\n              paused={this.props.paused}\n              theme={this.props.theme}\n            />\n          </BoardWrapper>\n          {!this.hideScoreboard && (\n            <ScoreboardWrapper>\n              <HeaderWrapper>\n                {!this.hideLogo && (\n                  <LogoWrapper>\n                    <Logo theme={this.props.theme} />\n                  </LogoWrapper>\n                )}\n                <TurnCount theme={this.props.theme}>\n                  Turn: <TurnCountValue>{currentFrame.turn}</TurnCountValue>\n                </TurnCount>\n              </HeaderWrapper>\n              <Scoreboard\n                turn={currentFrame.turn}\n                snakes={currentFrame.snakes}\n                food={currentFrame.food}\n                highlightSnake={this.props.highlightSnake}\n                theme={this.props.theme}\n              />\n            </ScoreboardWrapper>\n          )}\n        </GameBoardWrapper>\n      </PageWrapper>\n    );\n  }\n}\n\nexport default Game;\n","import { delay, getFrameByTurn, streamAllFrames } from \"../utils/engine-client\";\nimport { themes } from \"../theme\";\n\nconst DEFAULT_FPS = 20;\n\nexport const setGameOptions = gameOptions => ({\n  type: \"SET_GAME_OPTIONS\",\n  gameOptions\n});\n\nexport const setTheme = theme => ({\n  type: \"SET_THEME\",\n  theme\n});\n\nexport const gameOver = () => ({\n  type: \"GAME_OVER\"\n});\n\nexport const requestFrames = () => ({\n  type: \"REQUEST_FRAMES\"\n});\n\nexport const receiveFrame = (game, frame) => ({\n  type: \"RECEIVE_FRAME\",\n  game,\n  frame\n});\n\nexport const setCurrentFrame = frame => ({\n  type: \"SET_CURRENT_FRAME\",\n  frame\n});\n\nexport const pauseGame = () => ({\n  type: \"PAUSE_GAME\"\n});\n\nexport const resumeGame = () => ({\n  type: \"RESUME_GAME\"\n});\n\nexport const highlightSnake = snakeId => ({\n  type: \"HIGHLIGHT_SNAKE\",\n  snakeId\n});\n\nexport const fetchFrames = () => {\n  return async (dispatch, getState) => {\n    const {\n      autoplay,\n      engine: engineUrl,\n      game: gameId,\n      turn\n    } = getState().gameOptions;\n\n    dispatch(requestFrames());\n\n    await streamAllFrames(engineUrl, gameId, (game, frame) => {\n      // Workaround for bug where turn exluded on turn 0\n      frame.Turn = frame.Turn || 0;\n      dispatch(receiveFrame(game, frame));\n\n      // Workaround to render the first frame into the board\n      if (frame.Turn === 0) {\n        const frame = getState().frames[0];\n        dispatch(setCurrentFrame(frame));\n      }\n    });\n\n    if (autoplay) {\n      const frame = getState().frames[0];\n      dispatch(resumeGame());\n      dispatch(playFromFrame(frame));\n    }\n\n    // Only navigate to the specified frame if it is within the\n    // amount of frames available in the game\n    if (turn && turn <= getState().frames.length) {\n      const frame = getState().frames[turn];\n      dispatch(setCurrentFrame(frame));\n    }\n  };\n};\n\nexport const playFromFrame = frame => {\n  return async (dispatch, getState) => {\n    const { frameRate } = getState().gameOptions;\n    const frames = getState().frames.slice(); // Don't modify in place\n    const frameIndex = frames.indexOf(frame);\n    const slicedFrames = frames.slice(frameIndex);\n\n    const ceiledFps = Math.ceil(frameRate || DEFAULT_FPS);\n    const delayMillis = 1000 / ceiledFps;\n\n    for (const frame of slicedFrames) {\n      if (getState().paused) return;\n      dispatch(setCurrentFrame(frame));\n      await delay(delayMillis);\n    }\n\n    const lastFrame = slicedFrames[slicedFrames.length - 1];\n    if (lastFrame.gameOver) {\n      if (!getState().paused) dispatch(gameOver());\n    } else {\n      dispatch(playFromFrame(lastFrame));\n    }\n  };\n};\n\nexport const reloadGame = () => {\n  return async (dispatch, getState) => {\n    const { frames, paused } = getState();\n    if (paused) {\n      const frame = getFrameByTurn(frames, 0);\n      dispatch(setCurrentFrame(frame));\n    }\n  };\n};\n\nexport const toggleGamePause = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, paused } = getState();\n\n    if (paused) {\n      dispatch(resumeGame());\n      dispatch(playFromFrame(currentFrame));\n    } else {\n      dispatch(pauseGame());\n    }\n  };\n};\n\nexport const toggleTheme = themeToSet => {\n  return async (dispatch, getState) => {\n    const { theme } = getState();\n    dispatch(\n      setTheme(themeToSet || theme === themes.dark ? themes.light : themes.dark)\n    );\n  };\n};\n\nexport const stepForwardFrame = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, frames } = getState();\n    const nextFrame = currentFrame.turn + 1;\n    const stepToFrame = getFrameByTurn(frames, nextFrame);\n    if (stepToFrame) {\n      dispatch(setCurrentFrame(stepToFrame));\n    }\n  };\n};\n\nexport const stepBackwardFrame = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, frames } = getState();\n    const prevFrame = currentFrame.turn - 1;\n    const stepToFrame = getFrameByTurn(frames, prevFrame);\n    if (stepToFrame) {\n      dispatch(setCurrentFrame(stepToFrame));\n    }\n  };\n};\n","import { connect } from \"react-redux\";\nimport { parseQueryString } from \"../utils/url\";\nimport Game from \"../components/game\";\nimport {\n  fetchFrames,\n  reloadGame,\n  toggleGamePause,\n  toggleTheme,\n  setGameOptions,\n  stepForwardFrame,\n  stepBackwardFrame,\n  highlightSnake\n} from \"../actions\";\n\nconst options = parseQueryString(window.location.search);\n\nconst mapStateToProps = state => {\n  return {\n    options: options,\n    grid: state.grid,\n    paused: state.paused,\n    currentFrame: state.currentFrame,\n    frames: state.frames,\n    highlightedSnake: state.highlightedSnake,\n    theme: state.theme\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGameOptions: options => dispatch(setGameOptions(options)),\n  fetchFrames: () => dispatch(fetchFrames()),\n  toggleTheme: () => dispatch(toggleTheme()),\n  reloadGame: () => dispatch(reloadGame()),\n  toggleGamePause: paused => dispatch(toggleGamePause(paused)),\n  stepForwardFrame: () => dispatch(stepForwardFrame()),\n  stepBackwardFrame: () => dispatch(stepBackwardFrame()),\n  highlightSnake: snakeId => dispatch(highlightSnake(snakeId))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Game);\n","import React from \"react\";\nimport { render } from \"react-dom\";\n// import { compose, createStore, applyMiddleware } from \"redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport rootReducer from \"./reducers\";\nimport App from \"./containers/app\";\nimport { themes } from \"./theme\";\nimport thunkMiddleware from \"redux-thunk\";\n\nconst initialState = {\n  options: null,\n  grid: [],\n  frames: [],\n  paused: true,\n  highlightedSnake: null,\n  theme: themes.light\n};\nconst middleware = applyMiddleware(thunkMiddleware);\nconst store = createStore(rootReducer, initialState, middleware);\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n// const store = createStore(\n//   rootReducer,\n//   initialState,\n//   composeEnhancers(applyMiddleware(thunkMiddleware))\n// );\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}